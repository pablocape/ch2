<!DOCTYPE HTML>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>

<script>
function send_move(s,e){return 0==enviar_mov?(enviar_mov=!0,!1):void(s?parent.postMessage([black_coord[mov_yx[0]],black_coord[mov_yx[1]],s,e],"http://www.pampachess.com/"):parent.postMessage([black_coord[mov_yx[0]],black_coord[mov_yx[1]]],"http://www.pampachess.com/"))}function segundo_click_otro_jugador(){document.getElementById("chess_table").rows[parseInt(pos2.charAt(0))].cells[parseInt(pos2.charAt(1))].click()}function receiveMessage(s){s.origin||s.originalEvent.origin;enviar_mov=!1;var e=black_rev[s.data[0]];return pos2=black_rev[s.data[1]],console.log("player2: receive move"),s.data[2]?(coronar_otro=!0,pieza_cor_otro=s.data[2],s.data[3]&&(html_pieza_cor_otro=s.data[3]),document.getElementById("chess_table").rows[parseInt(e.charAt(0))].cells[parseInt(e.charAt(1))].click(),!1):void document.getElementById("chess_table").rows[parseInt(e.charAt(0))].cells[parseInt(e.charAt(1))].click()}function inicializarEventos_media(){for(var s=document.getElementById("chess_table"),e=0;8>e;e++)for(var a=0;8>a;a++)s.rows[e].cells[a].setAttribute("onClick","mostrar_mov(this);"),s.rows[e].cells[a].setAttribute("onMouseOver","if (this.id) if ((this.id).charAt(2) == turno) this.style.boxShadow='0px 0px 3px #033 inset'; if (this.className == 'lighter' || this.className == 'lighter_pp' || this.className == 'lighter_e') this.style.boxShadow='0px 0px 3px #033 inset';"),s.rows[e].cells[a].setAttribute("onMouseOut","if (this.style.boxShadow) this.style.boxShadow='';")}function limpiar_casilleros(){for(var s=document.getElementById("chess_table"),e=0;8>e;e++)for(var a=0;8>a;a++)(e+a)%2==0?s.rows[e].cells[a].className="casillero_blancas":s.rows[e].cells[a].className="casillero_negras"}function marcar_jaque_rey(){var s=document.getElementById("chess_table");0==turno&&(s.rows[pos_piezas_negras[1][0]].cells[pos_piezas_negras[1][1]].className="jaque"),1==turno&&(s.rows[pos_piezas_blancas[1][0]].cells[pos_piezas_blancas[1][1]].className="jaque")}function marcar_peligo_rey(){var s=document.getElementById("chess_table");0==turno&&(s.rows[pos_piezas_negras[1][0]].cells[pos_piezas_negras[1][1]].className="peligro"),1==turno&&(s.rows[pos_piezas_blancas[1][0]].cells[pos_piezas_blancas[1][1]].className="peligro")}function habilitar_mov(){for(var s=document.getElementById("chess_table"),e=0;8>e;e++)for(var a=0;8>a;a++)s.rows[e].cells[a].setAttribute("onClick","mostrar_mov(this);")}function mostrar_mov(s){if(1==mate)return!1;if("lighter"==s.className)return mover_pieza(s),!1;if("lighter_pp"==s.className)return mover_pieza_pp(s),!1;if("lighter_e"==s.className)return mover_pieza_e(s),!1;var e=s.id,a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));if(mov_yx[0]=a+""+r,!e)return!1;var l=document.getElementById("chess_table");if(e.charAt(2)!=turno||pieza)if(e.charAt(2)==turno&&e!=pieza.id)pieza=s,pieza_activa=!0,limpiar_casilleros(),l.rows[a].cells[r].className="casillero_seleccionado",jaque&&marcar_jaque_rey();else{if(e.charAt(2)!=turno||e!=pieza.id)return!1;if(pieza_activa)return limpiar_casilleros(),jaque&&marcar_jaque_rey(),pieza_activa=!1,!1;l.rows[a].cells[r].className="casillero_seleccionado"}else pieza=s,l.rows[a].cells[r].className="casillero_seleccionado",pieza_activa=!0;if(pieza_activa=!0,1==jaque)return mov_jaque(s),!1;var i=Object.getOwnPropertyNames(piezas_inmoviles);if(i.length>0)for(key in piezas_inmoviles)if(s.id==key)return mov_pieza_bloqueada(key),!1;var o=[],c=0;if(e.charAt(4)&&(c=e.charAt(4)),1==e.charAt(2)){if(0==c&&isNaN(e.charAt(3))){6==a?(l.rows[a-1].cells[r].id||o.push([a-1,r]),l.rows[a-1].cells[r].id||l.rows[a-2].cells[r].id||o.push([a-2,r])):l.rows[a-1].cells[r].id||o.push([a-1,r]),r-1>=0&&l.rows[a-1].cells[r-1].id&&0==l.rows[a-1].cells[r-1].id.charAt(2)&&o.push([a-1,r-1]),8>r+1&&l.rows[a-1].cells[r+1].id&&0==l.rows[a-1].cells[r+1].id.charAt(2)&&o.push([a-1,r+1]);for(var t=0;t<o.length;t++)l.rows[o[t][0]].cells[o[t][1]].className="lighter";return 1!=ultimo_mov[4]||3!=a||ultimo_mov[2]!=r+1&&ultimo_mov[2]!=r-1||(l.rows[ultimo_mov[1]-1].cells[ultimo_mov[2]].className="lighter_pp"),0==enviar_mov&&segundo_click_otro_jugador(),!1}if(3==e.charAt(3)||6==e.charAt(3)||3==c){for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));a>0&&r>0;){if(l.rows[a-1].cells[r-1].id){if(1==l.rows[a-1].cells[r-1].id.charAt(2))break;if(0==l.rows[a-1].cells[r-1].id.charAt(2)){o.push([a-1,r-1]);break}}else o.push([a-1,r-1]);--a,--r}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));a>0&&7>r;){if(l.rows[a-1].cells[r+1].id){if(1==l.rows[a-1].cells[r+1].id.charAt(2))break;if(0==l.rows[a-1].cells[r+1].id.charAt(2)){o.push([a-1,r+1]);break}}else o.push([a-1,r+1]);--a,++r}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));7>a&&r>0;){if(l.rows[a+1].cells[r-1].id){if(1==l.rows[a+1].cells[r-1].id.charAt(2))break;if(0==l.rows[a+1].cells[r-1].id.charAt(2)){o.push([a+1,r-1]);break}}else o.push([a+1,r-1]);++a,--r}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));7>a&&7>r;){if(l.rows[a+1].cells[r+1].id){if(1==l.rows[a+1].cells[r+1].id.charAt(2))break;if(0==l.rows[a+1].cells[r+1].id.charAt(2)){o.push([a+1,r+1]);break}}else o.push([a+1,r+1]);++a,++r}for(var t=0;t<o.length;t++)l.rows[o[t][0]].cells[o[t][1]].className="lighter"}else if(5==e.charAt(3)||8==e.charAt(3)||5==c){for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));a>0;){if(l.rows[a-1].cells[r].id){if(1==l.rows[a-1].cells[r].id.charAt(2))break;if(0==l.rows[a-1].cells[r].id.charAt(2)){o.push([a-1,r]);break}}else o.push([a-1,r]);--a}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));7>a;){if(l.rows[a+1].cells[r].id){if(1==l.rows[a+1].cells[r].id.charAt(2))break;if(0==l.rows[a+1].cells[r].id.charAt(2)){o.push([a+1,r]);break}}else o.push([a+1,r]);++a}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));r>0;){if(l.rows[a].cells[r-1].id){if(1==l.rows[a].cells[r-1].id.charAt(2))break;if(0==l.rows[a].cells[r-1].id.charAt(2)){o.push([a,r-1]);break}}else o.push([a,r-1]);--r}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));7>r;){if(l.rows[a].cells[r+1].id){if(1==l.rows[a].cells[r+1].id.charAt(2))break;if(0==l.rows[a].cells[r+1].id.charAt(2)){o.push([a,r+1]);break}}else o.push([a,r+1]);++r}for(var t=0;t<o.length;t++)l.rows[o[t][0]].cells[o[t][1]].className="lighter"}else if(2==e.charAt(3)||2==c){for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));a>0;){if(l.rows[a-1].cells[r].id){if(1==l.rows[a-1].cells[r].id.charAt(2))break;if(0==l.rows[a-1].cells[r].id.charAt(2)){o.push([a-1,r]);break}}else o.push([a-1,r]);--a}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));7>a;){if(l.rows[a+1].cells[r].id){if(1==l.rows[a+1].cells[r].id.charAt(2))break;if(0==l.rows[a+1].cells[r].id.charAt(2)){o.push([a+1,r]);break}}else o.push([a+1,r]);++a}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));r>0;){if(l.rows[a].cells[r-1].id){if(1==l.rows[a].cells[r-1].id.charAt(2))break;if(0==l.rows[a].cells[r-1].id.charAt(2)){o.push([a,r-1]);break}}else o.push([a,r-1]);--r}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));7>r;){if(l.rows[a].cells[r+1].id){if(1==l.rows[a].cells[r+1].id.charAt(2))break;if(0==l.rows[a].cells[r+1].id.charAt(2)){o.push([a,r+1]);break}}else o.push([a,r+1]);++r}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));a>0&&r>0;){if(l.rows[a-1].cells[r-1].id){if(1==l.rows[a-1].cells[r-1].id.charAt(2))break;if(0==l.rows[a-1].cells[r-1].id.charAt(2)){o.push([a-1,r-1]);break}}else o.push([a-1,r-1]);--a,--r}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));a>0&&7>r;){if(l.rows[a-1].cells[r+1].id){if(1==l.rows[a-1].cells[r+1].id.charAt(2))break;if(0==l.rows[a-1].cells[r+1].id.charAt(2)){o.push([a-1,r+1]);break}}else o.push([a-1,r+1]);--a,++r}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));7>a&&r>0;){if(l.rows[a+1].cells[r-1].id){if(1==l.rows[a+1].cells[r-1].id.charAt(2))break;if(0==l.rows[a+1].cells[r-1].id.charAt(2)){o.push([a+1,r-1]);break}}else o.push([a+1,r-1]);++a,--r}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));7>a&&7>r;){if(l.rows[a+1].cells[r+1].id){if(1==l.rows[a+1].cells[r+1].id.charAt(2))break;if(0==l.rows[a+1].cells[r+1].id.charAt(2)){o.push([a+1,r+1]);break}}else o.push([a+1,r+1]);++a,++r}for(var t=0;t<o.length;t++)l.rows[o[t][0]].cells[o[t][1]].className="lighter"}else if(4==e.charAt(3)||7==e.charAt(3)||4==c){a-2>-1&&r-1>-1&&(l.rows[a-2].cells[r-1].id&&0!=l.rows[a-2].cells[r-1].id.charAt(2)||o.push([a-2,r-1])),a-2>-1&&8>r+1&&(l.rows[a-2].cells[r+1].id&&0!=l.rows[a-2].cells[r+1].id.charAt(2)||o.push([a-2,r+1])),a-1>-1&&r-2>-1&&(l.rows[a-1].cells[r-2].id&&0!=l.rows[a-1].cells[r-2].id.charAt(2)||o.push([a-1,r-2])),a-1>-1&&8>r+2&&(l.rows[a-1].cells[r+2].id&&0!=l.rows[a-1].cells[r+2].id.charAt(2)||o.push([a-1,r+2])),8>a+1&&r-2>-1&&(l.rows[a+1].cells[r-2].id&&0!=l.rows[a+1].cells[r-2].id.charAt(2)||o.push([a+1,r-2])),8>a+1&&8>r+2&&(l.rows[a+1].cells[r+2].id&&0!=l.rows[a+1].cells[r+2].id.charAt(2)||o.push([a+1,r+2])),8>a+2&&r-1>-1&&(l.rows[a+2].cells[r-1].id&&0!=l.rows[a+2].cells[r-1].id.charAt(2)||o.push([a+2,r-1])),8>a+2&&8>r+1&&(l.rows[a+2].cells[r+1].id&&0!=l.rows[a+2].cells[r+1].id.charAt(2)||o.push([a+2,r+1]));for(var t=0;t<o.length;t++)l.rows[o[t][0]].cells[o[t][1]].className="lighter"}else if(1==e.charAt(3)){if(a-1>-1&&r-1>-1&&(l.rows[a-1].cells[r-1].id&&0!=l.rows[a-1].cells[r-1].id.charAt(2)||o.push([a-1,r-1])),a-1>-1&&(l.rows[a-1].cells[r].id&&0!=l.rows[a-1].cells[r].id.charAt(2)||o.push([a-1,r])),a-1>-1&&8>r+1&&(l.rows[a-1].cells[r+1].id&&0!=l.rows[a-1].cells[r+1].id.charAt(2)||o.push([a-1,r+1])),r-1>-1&&(l.rows[a].cells[r-1].id&&0!=l.rows[a].cells[r-1].id.charAt(2)||o.push([a,r-1])),8>a+1&&r-1>-1&&(l.rows[a+1].cells[r-1].id&&0!=l.rows[a+1].cells[r-1].id.charAt(2)||o.push([a+1,r-1])),8>a+1&&(l.rows[a+1].cells[r].id&&0!=l.rows[a+1].cells[r].id.charAt(2)||o.push([a+1,r])),8>a+1&&8>r+1&&(l.rows[a+1].cells[r+1].id&&0!=l.rows[a+1].cells[r+1].id.charAt(2)||o.push([a+1,r+1])),8>r+1&&(l.rows[a].cells[r+1].id&&0!=l.rows[a].cells[r+1].id.charAt(2)||o.push([a,r+1])),0==o.length)return!1;var p=[1,1];0==enroque_blancas[0]&&(0==enroque_blancas[1]&&(1==salida_w?l.rows[7].cells[1].id||l.rows[7].cells[2].id||l.rows[7].cells[3].id||(p[0]=0):l.rows[7].cells[1].id||l.rows[7].cells[2].id||(p[0]=0)),0==enroque_blancas[2]&&(1==salida_w?l.rows[7].cells[5].id||l.rows[7].cells[6].id||(p[1]=0):l.rows[7].cells[4].id||l.rows[7].cells[5].id||l.rows[7].cells[6].id||(p[1]=0)));var h=[];for(key in mov_ataque_negras)for(var t=0;t<mov_ataque_negras[key].length;t++){for(var n=0;n<o.length;n++)mov_ataque_negras[key][t].join("")==o[n].join("")&&h.push(n);0==p[0]&&(1==salida_w?("71"==mov_ataque_negras[key][t].join("")||"72"==mov_ataque_negras[key][t].join("")||"73"==mov_ataque_negras[key][t].join(""))&&(p[0]=1):("71"==mov_ataque_negras[key][t].join("")||"72"==mov_ataque_negras[key][t].join(""))&&(p[0]=1)),0==p[1]&&(1==salida_w?("75"==mov_ataque_negras[key][t].join("")||"76"==mov_ataque_negras[key][t].join(""))&&(p[1]=1):("74"==mov_ataque_negras[key][t].join("")||"75"==mov_ataque_negras[key][t].join("")||"76"==mov_ataque_negras[key][t].join(""))&&(p[1]=1))}if(0==p[0]&&(1==salida_w?l.rows[7].cells[2].className="lighter_e":l.rows[7].cells[1].className="lighter_e"),0==p[1]&&(1==salida_w?l.rows[7].cells[6].className="lighter_e":l.rows[7].cells[5].className="lighter_e"),h.length>0)for(var t=0;t<o.length;t++){var u=!1;for(n=0;n<h.length;n++)t==h[n]&&(u=!0);0==u&&(l.rows[o[t][0]].cells[o[t][1]].className="lighter")}else for(var t=0;t<o.length;t++)l.rows[o[t][0]].cells[o[t][1]].className="lighter"}}else if(0==e.charAt(2)){if(0==c&&isNaN(e.charAt(3))){1==a?(l.rows[a+1].cells[r].id||o.push([a+1,r]),l.rows[a+1].cells[r].id||l.rows[a+2].cells[r].id||o.push([a+2,r])):l.rows[a+1].cells[r].id||o.push([a+1,r]),r-1>=0&&l.rows[a+1].cells[r-1].id&&1==l.rows[a+1].cells[r-1].id.charAt(2)&&o.push([a+1,r-1]),8>r+1&&l.rows[a+1].cells[r+1].id&&1==l.rows[a+1].cells[r+1].id.charAt(2)&&o.push([a+1,r+1]);for(var t=0;t<o.length;t++)l.rows[o[t][0]].cells[o[t][1]].className="lighter";return 1!=ultimo_mov[4]||4!=a||ultimo_mov[2]!=r+1&&ultimo_mov[2]!=r-1||(l.rows[ultimo_mov[1]+1].cells[ultimo_mov[2]].className="lighter_pp"),0==enviar_mov&&segundo_click_otro_jugador(),!1}if(1==e.charAt(3)){if(a-1>-1&&r-1>-1&&(l.rows[a-1].cells[r-1].id&&1!=l.rows[a-1].cells[r-1].id.charAt(2)||o.push([a-1,r-1])),a-1>-1&&(l.rows[a-1].cells[r].id&&1!=l.rows[a-1].cells[r].id.charAt(2)||o.push([a-1,r])),a-1>-1&&8>r+1&&(l.rows[a-1].cells[r+1].id&&1!=l.rows[a-1].cells[r+1].id.charAt(2)||o.push([a-1,r+1])),r-1>-1&&(l.rows[a].cells[r-1].id&&1!=l.rows[a].cells[r-1].id.charAt(2)||o.push([a,r-1])),8>a+1&&r-1>-1&&(l.rows[a+1].cells[r-1].id&&1!=l.rows[a+1].cells[r-1].id.charAt(2)||o.push([a+1,r-1])),8>a+1&&(l.rows[a+1].cells[r].id&&1!=l.rows[a+1].cells[r].id.charAt(2)||o.push([a+1,r])),8>a+1&&8>r+1&&(l.rows[a+1].cells[r+1].id&&1!=l.rows[a+1].cells[r+1].id.charAt(2)||o.push([a+1,r+1])),8>r+1&&(l.rows[a].cells[r+1].id&&1!=l.rows[a].cells[r+1].id.charAt(2)||o.push([a,r+1])),0==o.length)return!1;var p=[1,1];0==enroque_negras[0]&&(0==enroque_negras[1]&&(1==salida_w?l.rows[0].cells[1].id||l.rows[0].cells[2].id||l.rows[0].cells[3].id||(p[0]=0):l.rows[0].cells[1].id||l.rows[0].cells[2].id||(p[0]=0)),0==enroque_negras[2]&&(1==salida_w?l.rows[0].cells[5].id||l.rows[0].cells[6].id||(p[1]=0):l.rows[0].cells[4].id||l.rows[0].cells[5].id||l.rows[0].cells[6].id||(p[1]=0)));var h=[];for(key in mov_ataque_blancas)for(var t=0;t<mov_ataque_blancas[key].length;t++){for(var n=0;n<o.length;n++)mov_ataque_blancas[key][t].join("")==o[n].join("")&&h.push(n);0==p[0]&&(1==salida_w?("01"==mov_ataque_blancas[key][t].join("")||"02"==mov_ataque_blancas[key][t].join("")||"03"==mov_ataque_blancas[key][t].join(""))&&(p[0]=1):("01"==mov_ataque_blancas[key][t].join("")||"02"==mov_ataque_blancas[key][t].join(""))&&(p[0]=1)),0==p[1]&&(1==salida_w?("05"==mov_ataque_blancas[key][t].join("")||"06"==mov_ataque_blancas[key][t].join(""))&&(p[1]=1):("04"==mov_ataque_blancas[key][t].join("")||"05"==mov_ataque_blancas[key][t].join("")||"06"==mov_ataque_blancas[key][t].join(""))&&(p[1]=1))}if(0==p[0]&&(1==salida_w?l.rows[0].cells[2].className="lighter_e":l.rows[0].cells[1].className="lighter_e"),0==p[1]&&(1==salida_w?l.rows[0].cells[6].className="lighter_e":l.rows[0].cells[5].className="lighter_e"),h.length>0)for(var t=0;t<o.length;t++){var u=!1;for(n=0;n<h.length;n++)t==h[n]&&(u=!0);0==u&&(l.rows[o[t][0]].cells[o[t][1]].className="lighter")}else for(var t=0;t<o.length;t++)l.rows[o[t][0]].cells[o[t][1]].className="lighter"}else if(3==e.charAt(3)||6==e.charAt(3)||3==c){for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));a>0&&r>0;){if(l.rows[a-1].cells[r-1].id){if(0==l.rows[a-1].cells[r-1].id.charAt(2))break;if(1==l.rows[a-1].cells[r-1].id.charAt(2)){o.push([a-1,r-1]);break}}else o.push([a-1,r-1]);--a,--r}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));a>0&&7>r;){if(l.rows[a-1].cells[r+1].id){if(0==l.rows[a-1].cells[r+1].id.charAt(2))break;if(1==l.rows[a-1].cells[r+1].id.charAt(2)){o.push([a-1,r+1]);break}}else o.push([a-1,r+1]);--a,++r}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));7>a&&r>0;){if(l.rows[a+1].cells[r-1].id){if(0==l.rows[a+1].cells[r-1].id.charAt(2))break;if(1==l.rows[a+1].cells[r-1].id.charAt(2)){o.push([a+1,r-1]);break}}else o.push([a+1,r-1]);++a,--r}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));7>a&&7>r;){if(l.rows[a+1].cells[r+1].id){if(0==l.rows[a+1].cells[r+1].id.charAt(2))break;if(1==l.rows[a+1].cells[r+1].id.charAt(2)){o.push([a+1,r+1]);break}}else o.push([a+1,r+1]);++a,++r}for(var t=0;t<o.length;t++)l.rows[o[t][0]].cells[o[t][1]].className="lighter"}else if(5==e.charAt(3)||8==e.charAt(3)||5==c){for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));a>0;){if(l.rows[a-1].cells[r].id){if(0==l.rows[a-1].cells[r].id.charAt(2))break;if(1==l.rows[a-1].cells[r].id.charAt(2)){o.push([a-1,r]);break}}else o.push([a-1,r]);--a}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));7>a;){if(l.rows[a+1].cells[r].id){if(0==l.rows[a+1].cells[r].id.charAt(2))break;if(1==l.rows[a+1].cells[r].id.charAt(2)){o.push([a+1,r]);break}}else o.push([a+1,r]);++a}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));r>0;){if(l.rows[a].cells[r-1].id){if(0==l.rows[a].cells[r-1].id.charAt(2))break;if(1==l.rows[a].cells[r-1].id.charAt(2)){o.push([a,r-1]);break}}else o.push([a,r-1]);--r}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));7>r;){if(l.rows[a].cells[r+1].id){if(0==l.rows[a].cells[r+1].id.charAt(2))break;if(1==l.rows[a].cells[r+1].id.charAt(2)){o.push([a,r+1]);break}}else o.push([a,r+1]);++r}for(var t=0;t<o.length;t++)l.rows[o[t][0]].cells[o[t][1]].className="lighter"}else if(2==e.charAt(3)||2==c){for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));a>0;){if(l.rows[a-1].cells[r].id){if(0==l.rows[a-1].cells[r].id.charAt(2))break;if(1==l.rows[a-1].cells[r].id.charAt(2)){o.push([a-1,r]);break}}else o.push([a-1,r]);--a}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));7>a;){if(l.rows[a+1].cells[r].id){if(0==l.rows[a+1].cells[r].id.charAt(2))break;if(1==l.rows[a+1].cells[r].id.charAt(2)){o.push([a+1,r]);break}}else o.push([a+1,r]);++a}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));r>0;){if(l.rows[a].cells[r-1].id){if(0==l.rows[a].cells[r-1].id.charAt(2))break;if(1==l.rows[a].cells[r-1].id.charAt(2)){o.push([a,r-1]);break}}else o.push([a,r-1]);--r}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));7>r;){if(l.rows[a].cells[r+1].id){if(0==l.rows[a].cells[r+1].id.charAt(2))break;if(1==l.rows[a].cells[r+1].id.charAt(2)){o.push([a,r+1]);break}}else o.push([a,r+1]);++r}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));a>0&&r>0;){if(l.rows[a-1].cells[r-1].id){if(0==l.rows[a-1].cells[r-1].id.charAt(2))break;if(1==l.rows[a-1].cells[r-1].id.charAt(2)){o.push([a-1,r-1]);break}}else o.push([a-1,r-1]);--a,--r}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));a>0&&7>r;){if(l.rows[a-1].cells[r+1].id){if(0==l.rows[a-1].cells[r+1].id.charAt(2))break;if(1==l.rows[a-1].cells[r+1].id.charAt(2)){o.push([a-1,r+1]);break}}else o.push([a-1,r+1]);--a,++r}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));7>a&&r>0;){if(l.rows[a+1].cells[r-1].id){if(0==l.rows[a+1].cells[r-1].id.charAt(2))break;if(1==l.rows[a+1].cells[r-1].id.charAt(2)){o.push([a+1,r-1]);break}}else o.push([a+1,r-1]);++a,--r}for(var a=parseInt(e.charAt(0)),r=parseInt(e.charAt(1));7>a&&7>r;){if(l.rows[a+1].cells[r+1].id){if(0==l.rows[a+1].cells[r+1].id.charAt(2))break;if(1==l.rows[a+1].cells[r+1].id.charAt(2)){o.push([a+1,r+1]);break}}else o.push([a+1,r+1]);++a,++r}for(var t=0;t<o.length;t++)l.rows[o[t][0]].cells[o[t][1]].className="lighter"}else if(4==e.charAt(3)||7==e.charAt(3)||4==c){a-2>-1&&r-1>-1&&(l.rows[a-2].cells[r-1].id&&1!=l.rows[a-2].cells[r-1].id.charAt(2)||o.push([a-2,r-1])),a-2>-1&&8>r+1&&(l.rows[a-2].cells[r+1].id&&1!=l.rows[a-2].cells[r+1].id.charAt(2)||o.push([a-2,r+1])),a-1>-1&&r-2>-1&&(l.rows[a-1].cells[r-2].id&&1!=l.rows[a-1].cells[r-2].id.charAt(2)||o.push([a-1,r-2])),a-1>-1&&8>r+2&&(l.rows[a-1].cells[r+2].id&&1!=l.rows[a-1].cells[r+2].id.charAt(2)||o.push([a-1,r+2])),8>a+1&&r-2>-1&&(l.rows[a+1].cells[r-2].id&&1!=l.rows[a+1].cells[r-2].id.charAt(2)||o.push([a+1,r-2])),8>a+1&&8>r+2&&(l.rows[a+1].cells[r+2].id&&1!=l.rows[a+1].cells[r+2].id.charAt(2)||o.push([a+1,r+2])),8>a+2&&r-1>-1&&(l.rows[a+2].cells[r-1].id&&1!=l.rows[a+2].cells[r-1].id.charAt(2)||o.push([a+2,r-1])),8>a+2&&8>r+1&&(l.rows[a+2].cells[r+1].id&&1!=l.rows[a+2].cells[r+1].id.charAt(2)||o.push([a+2,r+1]));for(var t=0;t<o.length;t++)l.rows[o[t][0]].cells[o[t][1]].className="lighter"}}0==enviar_mov&&segundo_click_otro_jugador()}function mov_pieza_bloqueada(s){var e=document.getElementById("chess_table"),a=piezas_inmoviles[s][0][0],r=piezas_inmoviles[s][0][1];if(s[4])var l=s[3]+s[4],i=1;else var l=s[3],i=0;if(marcar_peligo_rey(),0==turno){if(isNaN(s[3])&&0==i){var o=parseInt(s[0]),c=parseInt(s[1]);if(1==o){if(!e.rows[o+1].cells[c].id)for(var t=0;t<piezas_inmoviles[s].length;t++)piezas_inmoviles[s][t].join("")==o+1+""+c&&(e.rows[o+1].cells[c].className="lighter");if(!e.rows[o+1].cells[c].id&&!e.rows[o+2].cells[c].id)for(var t=0;t<piezas_inmoviles[s].length;t++)piezas_inmoviles[s][t].join("")==o+2+""+c&&(e.rows[o+2].cells[c].className="lighter")}else if(!e.rows[o+1].cells[c].id)for(var t=0;t<piezas_inmoviles[s].length;t++)piezas_inmoviles[s][t].join("")==o+1+""+c&&(e.rows[o+1].cells[c].className="lighter");return c-1>=0&&e.rows[o+1].cells[c-1].id.charAt(0)==a&&e.rows[o+1].cells[c-1].id.charAt(1)==r&&(e.rows[o+1].cells[c-1].className="lighter"),8>c+1&&e.rows[o+1].cells[c+1].id.charAt(0)==a&&e.rows[o+1].cells[c+1].id.charAt(1)==r&&(e.rows[o+1].cells[c+1].className="lighter"),0==enviar_mov&&segundo_click_otro_jugador(),!1}if(4==s[3]||7==s[3]){for(var t=0;t<mov_ataque_negras[l].length;t++)mov_ataque_negras[l][t].join("")==a+""+r&&(e.rows[a].cells[r].className="lighter");0==enviar_mov&&segundo_click_otro_jugador()}else{for(var t=0;t<mov_ataque_negras[l].length;t++)for(var p=0;p<piezas_inmoviles[s].length;p++)mov_ataque_negras[l][t].join("")==piezas_inmoviles[s][p].join("")&&(e.rows[piezas_inmoviles[s][p][0]].cells[piezas_inmoviles[s][p][1]].className="lighter");0==enviar_mov&&segundo_click_otro_jugador()}}else if(1==turno){if(isNaN(s[3])&&0==i){var o=parseInt(s[0]),c=parseInt(s[1]);if(6==o){if(!e.rows[o-1].cells[c].id)for(var t=0;t<piezas_inmoviles[s].length;t++)piezas_inmoviles[s][t].join("")==o-1+""+c&&(e.rows[o-1].cells[c].className="lighter");if(!e.rows[o-1].cells[c].id&&!e.rows[o-2].cells[c].id)for(var t=0;t<piezas_inmoviles[s].length;t++)piezas_inmoviles[s][t].join("")==o-2+""+c&&(e.rows[o-2].cells[c].className="lighter")}else if(!e.rows[o-1].cells[c].id)for(var t=0;t<piezas_inmoviles[s].length;t++)piezas_inmoviles[s][t].join("")==o-1+""+c&&(e.rows[o-1].cells[c].className="lighter");return c-1>=0&&e.rows[o-1].cells[c-1].id.charAt(0)==a&&e.rows[o-1].cells[c-1].id.charAt(1)==r&&(e.rows[o-1].cells[c-1].className="lighter"),8>c+1&&e.rows[o-1].cells[c+1].id.charAt(0)==a&&e.rows[o-1].cells[c+1].id.charAt(1)==r&&(e.rows[o-1].cells[c+1].className="lighter"),0==enviar_mov&&segundo_click_otro_jugador(),!1}if(4==s[3]||7==s[3]){for(var t=0;t<mov_ataque_blancas[l].length;t++)mov_ataque_blancas[l][t].join("")==a+""+r&&(e.rows[a].cells[r].className="lighter");0==enviar_mov&&segundo_click_otro_jugador()}else{for(var t=0;t<mov_ataque_blancas[l].length;t++)for(var p=0;p<piezas_inmoviles[s].length;p++)mov_ataque_blancas[l][t].join("")==piezas_inmoviles[s][p].join("")&&(e.rows[piezas_inmoviles[s][p][0]].cells[piezas_inmoviles[s][p][1]].className="lighter");0==enviar_mov&&segundo_click_otro_jugador()}}}function mover_pieza(s){1==jaque&&(jaque=!1,jaque_mov_rey=[],jaque_mov_piezas={},jaque_pos={}),piezas_inmoviles={},pieza2&&(pieza2.style.backgroundImage=""),pieza3&&(pieza3.style.backgroundImage=""),pieza2=pieza,pieza3=s;var e=s.parentNode.rowIndex,a=s.cellIndex,r=pieza.id,l=!1;if(r.charAt(4))var i=e+""+a+r.charAt(2)+r.charAt(3)+r.charAt(4);else var i=e+""+a+r.charAt(2)+r.charAt(3);if(1==r[3]?(1==r[2]&&0==enroque_blancas[0]&&(enroque_blancas[0]=!0),0==r[2]&&0==enroque_negras[0]&&(enroque_negras[0]=!0)):5==r[3]?(1==r[2]&&0==enroque_blancas[1]&&(enroque_blancas[1]=!0),0==r[2]&&0==enroque_negras[1]&&(enroque_negras[1]=!0)):8==r[3]&&(1==r[2]&&0==enroque_blancas[2]&&(enroque_blancas[2]=!0),0==r[2]&&0==enroque_negras[2]&&(enroque_negras[2]=!0)),(isNaN(r[3])&&1==r[2]&&6==r[0]&&4==e&&!r[4]||isNaN(r[3])&&0==r[2]&&1==r[0]&&3==e&&!r[4])&&(l=!0,peon_al_paso=s),ultimo_mov=[++num_mov,e,a,r.charAt(2),l],s.id){var o=s.id;if(o[4])var c=o[3]+""+o[4];else{var c=o[3];5==o[3]?(1==o[2]&&0==enroque_blancas[1]&&(enroque_blancas[1]=!0),0==o[2]&&0==enroque_negras[1]&&(enroque_negras[1]=!0)):8==o[3]&&(1==o[2]&&0==enroque_blancas[2]&&(enroque_blancas[2]=!0),0==o[2]&&0==enroque_negras[2]&&(enroque_negras[2]=!0))}0==o[2]?(delete pos_piezas_negras[c],delete mov_ataque_negras[c]):1==o[2]&&(delete pos_piezas_blancas[c],delete mov_ataque_blancas[c])}if(mov_yx[1]=e+""+a,1==coronar_otro)return coronar_otro=!1,pieza_coronar=s,id_coronar=i.slice(),pieza.id="",pieza.innerHTML="",coronar(pieza_cor_otro,html_pieza_cor_otro),!1;if(isNaN(pieza.id.charAt(3))&&!pieza.id.charAt(4)){if(1==turno&&0==e){var t=document.getElementById("chess_table");return limpiar_casilleros(),t.rows[e].cells[a].className="lighter",mate=!0,turno=3,pieza_coronar=s,id_coronar=i.slice(),document.getElementById("coronacion_blancas").style.visibility="visible",pieza.id="",pieza.innerHTML="",!1}if(0==turno&&7==e){var t=document.getElementById("chess_table");return limpiar_casilleros(),t.rows[e].cells[a].className="lighter",mate=!0,turno=3,pieza_coronar=s,id_coronar=i.slice(),document.getElementById("coronacion_negras").style.visibility="visible",pieza.id="",pieza.innerHTML="",!1}}if(send_move(),s.id=i,s.innerHTML=pieza.innerHTML.slice(),pieza3.style.backgroundImage="url(images/chess/chess7.png)",pieza.id="",pieza.innerHTML="",pieza2.style.backgroundImage="url(images/chess/chess6.png)",limpiar_casilleros(),i[4])var c=i[3]+""+i[4];else var c=i[3];1==i[2]?pos_piezas_blancas[c]=[parseInt(i[0]),parseInt(i[1])]:pos_piezas_negras[c]=[parseInt(i[0]),parseInt(i[1])],2==i[3]||3==i[3]||6==i[3]||5==i[3]||8==i[3]?mov_ataque2(i):(mov_ataque1(i),mov_ataque2(i)),0==jaque&&verificar_tablas(),turno=0==mate?0==turno?1:0:2}function coronar(s,e){send_move(s,e);var a=id_coronar.slice();mate=!1,turno=a[2],1==turno?document.getElementById("coronacion_blancas").style.visibility="hidden":document.getElementById("coronacion_negras").style.visibility="hidden";var r=a+s;pieza_coronar.id=r,pieza_coronar.innerHTML=e,limpiar_casilleros();var l=r[3],i=r[3]+""+r[4];1==r[2]?(delete pos_piezas_blancas[l],delete mov_ataque_blancas[l],pos_piezas_blancas[i]=[parseInt(r[0]),parseInt(r[1])]):(delete pos_piezas_negras[l],delete mov_ataque_negras[l],pos_piezas_negras[i]=[parseInt(r[0]),parseInt(r[1])]),2==r[4]||3==r[4]||5==r[4]?mov_ataque2(r):(mov_ataque1(r),mov_ataque2(r)),0==jaque&&verificar_tablas(),turno=0==mate?0==turno?1:0:2}function mover_pieza_pp(s){1==jaque&&(jaque=!1,jaque_mov_rey=[],jaque_mov_piezas={},jaque_pos={}),pieza2&&(pieza2.style.backgroundImage=""),pieza3&&(pieza3.style.backgroundImage=""),pieza2=pieza,pieza3=s;var e=s.parentNode.rowIndex,a=s.cellIndex,r=pieza.id,l=!1;if(r[4])var i=e+""+a+r.charAt(2)+r.charAt(3)+r.charAt(4);else var i=e+""+a+r.charAt(2)+r.charAt(3);mov_yx[1]=i.charAt(0)+""+i.charAt(1),send_move(),ultimo_mov=[++num_mov,e,a,r.charAt(2),l];var o=peon_al_paso.id;if(o[4])var c=o[3]+""+o[4];else var c=o[3];if(0==o[2]?(delete pos_piezas_negras[c],delete mov_ataque_negras[c]):1==o[2]&&(delete pos_piezas_blancas[c],delete mov_ataque_blancas[c]),s.id=i,s.innerHTML=pieza.innerHTML.slice(),pieza3.style.backgroundImage="url(images/chess/chess7.png)",pieza.id="",pieza.innerHTML="",pieza2.style.backgroundImage="url(images/chess/chess6.png)",peon_al_paso.id="",peon_al_paso.innerHTML="",limpiar_casilleros(),i[4])var c=i[3]+""+i[4];else var c=i[3];1==i[2]?pos_piezas_blancas[c]=[parseInt(i[0]),parseInt(i[1])]:pos_piezas_negras[c]=[parseInt(i[0]),parseInt(i[1])],2==i[3]||3==i[3]||6==i[3]||5==i[3]||8==i[3]?mov_ataque2(i):(mov_ataque1(i),mov_ataque2(i)),0==jaque&&verificar_tablas(),turno=0==mate?0==turno?1:0:2}function mover_pieza_e(s){var e=document.getElementById("chess_table"),a=s.parentNode.rowIndex,r=s.cellIndex,l=pieza.id,i=!1;if(pieza2&&(pieza2.style.backgroundImage=""),pieza3&&(pieza3.style.backgroundImage=""),pieza2=pieza,pieza3=s,0==l[2]?enroque_negras[0]=!0:1==l[2]&&(enroque_blancas[0]=!0),l[4])var o=a+""+r+l.charAt(2)+l.charAt(3)+l.charAt(4);else var o=a+""+r+l.charAt(2)+l.charAt(3);mov_yx[1]=o.charAt(0)+""+o.charAt(1),send_move(),ultimo_mov=[++num_mov,a,r,l.charAt(2),i],s.id=o,s.innerHTML=pieza.innerHTML.slice(),pieza3.style.backgroundImage="url(images/chess/chess7.png)",pieza.id="",pieza.innerHTML="",pieza2.style.backgroundImage="url(images/chess/chess6.png)";var c=o[0],t=o[1],p=o[2];if(2==t){var h=e.rows[c].cells[0];e.rows[c].cells[3].innerHTML=h.innerHTML,e.rows[c].cells[3].id=c+"3"+p+5,h.innerHTML="",h.id="",0==c?(pos_piezas_negras[1]=[parseInt(o[0]),parseInt(o[1])],pos_piezas_negras[5]=[0,3]):(pos_piezas_blancas[1]=[parseInt(o[0]),parseInt(o[1])],pos_piezas_blancas[5]=[7,3])}else if(6==t){var h=e.rows[c].cells[7];e.rows[c].cells[5].innerHTML=h.innerHTML,e.rows[c].cells[5].id=c+"5"+p+8,h.innerHTML="",h.id="",0==c?(pos_piezas_negras[1]=[parseInt(o[0]),parseInt(o[1])],pos_piezas_negras[8]=[0,5]):(pos_piezas_blancas[1]=[parseInt(o[0]),parseInt(o[1])],pos_piezas_blancas[8]=[7,5])}else if(1==t){var h=e.rows[c].cells[0];e.rows[c].cells[2].innerHTML=h.innerHTML,e.rows[c].cells[2].id=c+"2"+p+5,h.innerHTML="",h.id="",0==c?(pos_piezas_negras[1]=[parseInt(o[0]),parseInt(o[1])],pos_piezas_negras[5]=[0,2]):(pos_piezas_blancas[1]=[parseInt(o[0]),parseInt(o[1])],pos_piezas_blancas[5]=[7,2])}else if(5==t){var h=e.rows[c].cells[7];e.rows[c].cells[4].innerHTML=h.innerHTML,e.rows[c].cells[4].id=c+"4"+p+8,h.innerHTML="",h.id="",0==c?(pos_piezas_negras[1]=[parseInt(o[0]),parseInt(o[1])],pos_piezas_negras[8]=[0,4]):(pos_piezas_blancas[1]=[parseInt(o[0]),parseInt(o[1])],pos_piezas_blancas[8]=[7,4])}limpiar_casilleros(),2==o[3]||3==o[3]||6==o[3]||5==o[3]||8==o[3]?mov_ataque2(o):(mov_ataque1(o),mov_ataque2(o)),turno=0==mate?0==turno?1:0:2}function mov_ataque1(s){var e=document.getElementById("chess_table"),a=[],r=parseInt(s[0]),l=parseInt(s[1]),i=[];if(i.push([r,l]),1==s[2]){if(s[4]){if(4==s[4]){var o=s[3]+"4";if(mov_ataque_blancas[o]=[],r-2>-1&&l-1>-1&&(a.push([r-2,l-1]),e.rows[r-2].cells[l-1].id&&1==e.rows[r-2].cells[l-1].id.charAt(3)&&0==e.rows[r-2].cells[l-1].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r-2].cells[l-1].className="jaque"}if(r-2>-1&&8>l+1&&(a.push([r-2,l+1]),e.rows[r-2].cells[l+1].id&&1==e.rows[r-2].cells[l+1].id.charAt(3)&&0==e.rows[r-2].cells[l+1].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r-2].cells[l+1].className="jaque"}if(r-1>-1&&l-2>-1&&(a.push([r-1,l-2]),e.rows[r-1].cells[l-2].id&&1==e.rows[r-1].cells[l-2].id.charAt(3)&&0==e.rows[r-1].cells[l-2].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r-1].cells[l-2].className="jaque"}if(r-1>-1&&8>l+2&&(a.push([r-1,l+2]),e.rows[r-1].cells[l+2].id&&1==e.rows[r-1].cells[l+2].id.charAt(3)&&0==e.rows[r-1].cells[l+2].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r-1].cells[l+2].className="jaque"}if(8>r+1&&l-2>-1&&(a.push([r+1,l-2]),e.rows[r+1].cells[l-2].id&&1==e.rows[r+1].cells[l-2].id.charAt(3)&&0==e.rows[r+1].cells[l-2].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r+1].cells[l-2].className="jaque"}if(8>r+1&&8>l+2&&(a.push([r+1,l+2]),e.rows[r+1].cells[l+2].id&&1==e.rows[r+1].cells[l+2].id.charAt(3)&&0==e.rows[r+1].cells[l+2].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r+1].cells[l+2].className="jaque"}if(8>r+2&&l-1>-1&&(a.push([r+2,l-1]),e.rows[r+2].cells[l-1].id&&1==e.rows[r+2].cells[l-1].id.charAt(3)&&0==e.rows[r+2].cells[l-1].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r+2].cells[l-1].className="jaque"}if(8>r+2&&8>l+1&&(a.push([r+2,l+1]),e.rows[r+2].cells[l+1].id&&1==e.rows[r+2].cells[l+1].id.charAt(3)&&0==e.rows[r+2].cells[l+1].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r+2].cells[l+1].className="jaque"}mov_ataque_blancas[o]=a.slice()}}else if(isNaN(s[3])){var o=s[3];if(mov_ataque_blancas[o]=[],l-1>=0&&(a.push([r-1,l-1]),e.rows[r-1].cells[l-1].id&&1==e.rows[r-1].cells[l-1].id.charAt(3)&&0==e.rows[r-1].cells[l-1].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r-1].cells[l-1].className="jaque"}if(8>l+1&&(a.push([r-1,l+1]),e.rows[r-1].cells[l+1].id&&1==e.rows[r-1].cells[l+1].id.charAt(3)&&0==e.rows[r-1].cells[l+1].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r-1].cells[l+1].className="jaque"}mov_ataque_blancas[o]=a.slice()}else if(1==s[3])mov_ataque_blancas[1]=[],r-1>-1&&l-1>-1&&a.push([r-1,l-1]),r-1>-1&&a.push([r-1,l]),r-1>-1&&8>l+1&&a.push([r-1,l+1]),l-1>-1&&a.push([r,l-1]),8>r+1&&l-1>-1&&a.push([r+1,l-1]),8>r+1&&a.push([r+1,l]),8>r+1&&8>l+1&&a.push([r+1,l+1]),8>l+1&&a.push([r,l+1]),
mov_ataque_blancas[1]=a.slice();else if(4==s[3]||7==s[3]){var o=s[3];if(mov_ataque_blancas[o]=[],r-2>-1&&l-1>-1&&(a.push([r-2,l-1]),e.rows[r-2].cells[l-1].id&&1==e.rows[r-2].cells[l-1].id.charAt(3)&&0==e.rows[r-2].cells[l-1].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r-2].cells[l-1].className="jaque"}if(r-2>-1&&8>l+1&&(a.push([r-2,l+1]),e.rows[r-2].cells[l+1].id&&1==e.rows[r-2].cells[l+1].id.charAt(3)&&0==e.rows[r-2].cells[l+1].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r-2].cells[l+1].className="jaque"}if(r-1>-1&&l-2>-1&&(a.push([r-1,l-2]),e.rows[r-1].cells[l-2].id&&1==e.rows[r-1].cells[l-2].id.charAt(3)&&0==e.rows[r-1].cells[l-2].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r-1].cells[l-2].className="jaque"}if(r-1>-1&&8>l+2&&(a.push([r-1,l+2]),e.rows[r-1].cells[l+2].id&&1==e.rows[r-1].cells[l+2].id.charAt(3)&&0==e.rows[r-1].cells[l+2].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r-1].cells[l+2].className="jaque"}if(8>r+1&&l-2>-1&&(a.push([r+1,l-2]),e.rows[r+1].cells[l-2].id&&1==e.rows[r+1].cells[l-2].id.charAt(3)&&0==e.rows[r+1].cells[l-2].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r+1].cells[l-2].className="jaque"}if(8>r+1&&8>l+2&&(a.push([r+1,l+2]),e.rows[r+1].cells[l+2].id&&1==e.rows[r+1].cells[l+2].id.charAt(3)&&0==e.rows[r+1].cells[l+2].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r+1].cells[l+2].className="jaque"}if(8>r+2&&l-1>-1&&(a.push([r+2,l-1]),e.rows[r+2].cells[l-1].id&&1==e.rows[r+2].cells[l-1].id.charAt(3)&&0==e.rows[r+2].cells[l-1].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r+2].cells[l-1].className="jaque"}if(8>r+2&&8>l+1&&(a.push([r+2,l+1]),e.rows[r+2].cells[l+1].id&&1==e.rows[r+2].cells[l+1].id.charAt(3)&&0==e.rows[r+2].cells[l+1].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r+2].cells[l+1].className="jaque"}mov_ataque_blancas[o]=a.slice()}}else if(0==s[2])if(s[4]){if(4==s[4]){var o=s[3]+"4";if(mov_ataque_negras[o]=[],r-2>-1&&l-1>-1&&(a.push([r-2,l-1]),e.rows[r-2].cells[l-1].id&&1==e.rows[r-2].cells[l-1].id.charAt(3)&&1==e.rows[r-2].cells[l-1].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r-2].cells[l-1].className="jaque"}if(r-2>-1&&8>l+1&&(a.push([r-2,l+1]),e.rows[r-2].cells[l+1].id&&1==e.rows[r-2].cells[l+1].id.charAt(3)&&1==e.rows[r-2].cells[l+1].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r-2].cells[l+1].className="jaque"}if(r-1>-1&&l-2>-1&&(a.push([r-1,l-2]),e.rows[r-1].cells[l-2].id&&1==e.rows[r-1].cells[l-2].id.charAt(3)&&1==e.rows[r-1].cells[l-2].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r-1].cells[l-2].className="jaque"}if(r-1>-1&&8>l+2&&(a.push([r-1,l+2]),e.rows[r-1].cells[l+2].id&&1==e.rows[r-1].cells[l+2].id.charAt(3)&&1==e.rows[r-1].cells[l+2].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r-1].cells[l+2].className="jaque"}if(8>r+1&&l-2>-1&&(a.push([r+1,l-2]),e.rows[r+1].cells[l-2].id&&1==e.rows[r+1].cells[l-2].id.charAt(3)&&1==e.rows[r+1].cells[l-2].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r+1].cells[l-2].className="jaque"}if(8>r+1&&8>l+2&&(a.push([r+1,l+2]),e.rows[r+1].cells[l+2].id&&1==e.rows[r+1].cells[l+2].id.charAt(3)&&1==e.rows[r+1].cells[l+2].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r+1].cells[l+2].className="jaque"}if(8>r+2&&l-1>-1&&(a.push([r+2,l-1]),e.rows[r+2].cells[l-1].id&&1==e.rows[r+2].cells[l-1].id.charAt(3)&&1==e.rows[r+2].cells[l-1].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r+2].cells[l-1].className="jaque"}if(8>r+2&&8>l+1&&(a.push([r+2,l+1]),e.rows[r+2].cells[l+1].id&&1==e.rows[r+2].cells[l+1].id.charAt(3)&&1==e.rows[r+2].cells[l+1].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r+2].cells[l+1].className="jaque"}mov_ataque_negras[o]=a.slice()}}else if(isNaN(s[3])){var o=s[3];if(mov_ataque_negras[o]=[],l-1>=0&&(a.push([r+1,l-1]),e.rows[r+1].cells[l-1].id&&1==e.rows[r+1].cells[l-1].id.charAt(3)&&1==e.rows[r+1].cells[l-1].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r+1].cells[l-1].className="jaque"}if(8>l+1&&(a.push([r+1,l+1]),e.rows[r+1].cells[l+1].id&&1==e.rows[r+1].cells[l+1].id.charAt(3)&&1==e.rows[r+1].cells[l+1].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r+1].cells[l+1].className="jaque"}mov_ataque_negras[o]=a.slice()}else if(1==s[3])mov_ataque_negras[1]=[],r-1>-1&&l-1>-1&&a.push([r-1,l-1]),r-1>-1&&a.push([r-1,l]),r-1>-1&&8>l+1&&a.push([r-1,l+1]),l-1>-1&&a.push([r,l-1]),8>r+1&&l-1>-1&&a.push([r+1,l-1]),8>r+1&&a.push([r+1,l]),8>r+1&&8>l+1&&a.push([r+1,l+1]),8>l+1&&a.push([r,l+1]),mov_ataque_negras[1]=a.slice();else if(4==s[3]||7==s[3]){var o=s[3];if(mov_ataque_negras[o]=[],r-2>-1&&l-1>-1&&(a.push([r-2,l-1]),e.rows[r-2].cells[l-1].id&&1==e.rows[r-2].cells[l-1].id.charAt(3)&&1==e.rows[r-2].cells[l-1].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r-2].cells[l-1].className="jaque"}if(r-2>-1&&8>l+1&&(a.push([r-2,l+1]),e.rows[r-2].cells[l+1].id&&1==e.rows[r-2].cells[l+1].id.charAt(3)&&1==e.rows[r-2].cells[l+1].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r-2].cells[l+1].className="jaque"}if(r-1>-1&&l-2>-1&&(a.push([r-1,l-2]),e.rows[r-1].cells[l-2].id&&1==e.rows[r-1].cells[l-2].id.charAt(3)&&1==e.rows[r-1].cells[l-2].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r-1].cells[l-2].className="jaque"}if(r-1>-1&&8>l+2&&(a.push([r-1,l+2]),e.rows[r-1].cells[l+2].id&&1==e.rows[r-1].cells[l+2].id.charAt(3)&&1==e.rows[r-1].cells[l+2].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r-1].cells[l+2].className="jaque"}if(8>r+1&&l-2>-1&&(a.push([r+1,l-2]),e.rows[r+1].cells[l-2].id&&1==e.rows[r+1].cells[l-2].id.charAt(3)&&1==e.rows[r+1].cells[l-2].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r+1].cells[l-2].className="jaque"}if(8>r+1&&8>l+2&&(a.push([r+1,l+2]),e.rows[r+1].cells[l+2].id&&1==e.rows[r+1].cells[l+2].id.charAt(3)&&1==e.rows[r+1].cells[l+2].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r+1].cells[l+2].className="jaque"}if(8>r+2&&l-1>-1&&(a.push([r+2,l-1]),e.rows[r+2].cells[l-1].id&&1==e.rows[r+2].cells[l-1].id.charAt(3)&&1==e.rows[r+2].cells[l-1].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r+2].cells[l-1].className="jaque"}if(8>r+2&&8>l+1&&(a.push([r+2,l+1]),e.rows[r+2].cells[l+1].id&&1==e.rows[r+2].cells[l+1].id.charAt(3)&&1==e.rows[r+2].cells[l+1].id.charAt(2))){var c=r+""+l+1+o;jaque=!0,jaque_pos[c]=i,e.rows[r+2].cells[l+1].className="jaque"}mov_ataque_negras[o]=a.slice()}}function mov_ataque2(s){var e=document.getElementById("chess_table"),a=0;for(key in pos_piezas_blancas){if(a=2==key.length?key[1]:key,2==key||2==a){mov_ataque_blancas[key]=[];var r=[],l=parseInt(pos_piezas_blancas[key][0]),i=parseInt(pos_piezas_blancas[key][1]),o=parseInt(pos_piezas_blancas[key][0]),c=parseInt(pos_piezas_blancas[key][1]),t=[];for(t.push([o,c]);o>0;){if(e.rows[o-1].cells[c].id){if(1!=e.rows[o-1].cells[c].id.charAt(3)||0!=e.rows[o-1].cells[c].id.charAt(2)){if(r.push([o-1,c]),t.push([o-1,c]),0==e.rows[o-1].cells[c].id.charAt(2)){var p=e.rows[o-1].cells[c].id;for(--o;o>0;){if(e.rows[o-1].cells[c].id){if(1==e.rows[o-1].cells[c].id.charAt(3)&&0==e.rows[o-1].cells[c].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o-1,c]),--o}}break}r.push([o-1,c]);var h=l+""+i+1+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o-1,c]),t.push([o-1,c]);--o}var o=parseInt(pos_piezas_blancas[key][0]),c=parseInt(pos_piezas_blancas[key][1]),t=[];for(t.push([o,c]);7>o;){if(e.rows[o+1].cells[c].id){if(1!=e.rows[o+1].cells[c].id.charAt(3)||0!=e.rows[o+1].cells[c].id.charAt(2)){if(r.push([o+1,c]),t.push([o+1,c]),0==e.rows[o+1].cells[c].id.charAt(2)){var p=e.rows[o+1].cells[c].id;for(++o;7>o;){if(e.rows[o+1].cells[c].id){if(1==e.rows[o+1].cells[c].id.charAt(3)&&0==e.rows[o+1].cells[c].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o+1,c]),++o}}break}r.push([o+1,c]);var h=l+""+i+1+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o+1,c]),t.push([o+1,c]);++o}var o=parseInt(pos_piezas_blancas[key][0]),c=parseInt(pos_piezas_blancas[key][1]),t=[];for(t.push([o,c]);c>0;){if(e.rows[o].cells[c-1].id){if(1!=e.rows[o].cells[c-1].id.charAt(3)||0!=e.rows[o].cells[c-1].id.charAt(2)){if(r.push([o,c-1]),t.push([o,c-1]),0==e.rows[o].cells[c-1].id.charAt(2)){var p=e.rows[o].cells[c-1].id;for(--c;c>0;){if(e.rows[o].cells[c-1].id){if(1==e.rows[o].cells[c-1].id.charAt(3)&&0==e.rows[o].cells[c-1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o,c-1]),--c}}break}r.push([o,c-1]);var h=l+""+i+1+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o,c-1]),t.push([o,c-1]);--c}var o=parseInt(pos_piezas_blancas[key][0]),c=parseInt(pos_piezas_blancas[key][1]),t=[];for(t.push([o,c]);7>c;){if(e.rows[o].cells[c+1].id){if(1!=e.rows[o].cells[c+1].id.charAt(3)||0!=e.rows[o].cells[c+1].id.charAt(2)){if(r.push([o,c+1]),t.push([o,c+1]),0==e.rows[o].cells[c+1].id.charAt(2)){var p=e.rows[o].cells[c+1].id;for(++c;7>c;){if(e.rows[o].cells[c+1].id){if(1==e.rows[o].cells[c+1].id.charAt(3)&&0==e.rows[o].cells[c+1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o,c+1]),++c}}break}r.push([o,c+1]);var h=l+""+i+1+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o,c+1]),t.push([o,c+1]);++c}var o=parseInt(pos_piezas_blancas[key][0]),c=parseInt(pos_piezas_blancas[key][1]),t=[];for(t.push([o,c]);o>0&&c>0;){if(e.rows[o-1].cells[c-1].id){if(1!=e.rows[o-1].cells[c-1].id.charAt(3)||0!=e.rows[o-1].cells[c-1].id.charAt(2)){if(r.push([o-1,c-1]),t.push([o-1,c-1]),0==e.rows[o-1].cells[c-1].id.charAt(2)){var p=e.rows[o-1].cells[c-1].id;for(--o,--c;o>0&&c>0;){if(e.rows[o-1].cells[c-1].id){if(1==e.rows[o-1].cells[c-1].id.charAt(3)&&0==e.rows[o-1].cells[c-1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o-1,c-1]),--o,--c}}break}r.push([o-1,c-1]);var h=l+""+i+1+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o-1,c-1]),t.push([o-1,c-1]);--o,--c}var o=parseInt(pos_piezas_blancas[key][0]),c=parseInt(pos_piezas_blancas[key][1]),t=[];for(t.push([o,c]);o>0&&7>c;){if(e.rows[o-1].cells[c+1].id){if(1!=e.rows[o-1].cells[c+1].id.charAt(3)||0!=e.rows[o-1].cells[c+1].id.charAt(2)){if(r.push([o-1,c+1]),t.push([o-1,c+1]),0==e.rows[o-1].cells[c+1].id.charAt(2)){var p=e.rows[o-1].cells[c+1].id;for(--o,++c;o>0&&7>c;){if(e.rows[o-1].cells[c+1].id){if(1==e.rows[o-1].cells[c+1].id.charAt(3)&&0==e.rows[o-1].cells[c+1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o-1,c+1]),--o,++c}}break}r.push([o-1,c+1]);var h=l+""+i+1+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o-1,c+1]),t.push([o-1,c+1]);--o,++c}var o=parseInt(pos_piezas_blancas[key][0]),c=parseInt(pos_piezas_blancas[key][1]),t=[];for(t.push([o,c]);7>o&&c>0;){if(e.rows[o+1].cells[c-1].id){if(1!=e.rows[o+1].cells[c-1].id.charAt(3)||0!=e.rows[o+1].cells[c-1].id.charAt(2)){if(r.push([o+1,c-1]),t.push([o+1,c-1]),0==e.rows[o+1].cells[c-1].id.charAt(2)){var p=e.rows[o+1].cells[c-1].id;for(++o,--c;7>o&&c>0;){if(e.rows[o+1].cells[c-1].id){if(1==e.rows[o+1].cells[c-1].id.charAt(3)&&0==e.rows[o+1].cells[c-1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o+1,c-1]),++o,--c}}break}r.push([o+1,c-1]);var h=l+""+i+1+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o+1,c-1]),t.push([o+1,c-1]);++o,--c}var o=parseInt(pos_piezas_blancas[key][0]),c=parseInt(pos_piezas_blancas[key][1]),t=[];for(t.push([o,c]);7>o&&7>c;){if(e.rows[o+1].cells[c+1].id){if(1!=e.rows[o+1].cells[c+1].id.charAt(3)||0!=e.rows[o+1].cells[c+1].id.charAt(2)){if(r.push([o+1,c+1]),t.push([o+1,c+1]),0==e.rows[o+1].cells[c+1].id.charAt(2)){var p=e.rows[o+1].cells[c+1].id;for(++o,++c;7>o&&7>c;){if(e.rows[o+1].cells[c+1].id){if(1==e.rows[o+1].cells[c+1].id.charAt(3)&&0==e.rows[o+1].cells[c+1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o+1,c+1]),++o,++c}}break}r.push([o+1,c+1]);var h=l+""+i+1+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o+1,c+1]),t.push([o+1,c+1]);++o,++c}mov_ataque_blancas[key]=r.slice()}if(3==key||6==key||3==a){mov_ataque_blancas[key]=[];var r=[],l=parseInt(pos_piezas_blancas[key][0]),i=parseInt(pos_piezas_blancas[key][1]),o=parseInt(pos_piezas_blancas[key][0]),c=parseInt(pos_piezas_blancas[key][1]),t=[];for(t.push([o,c]);o>0&&c>0;){if(e.rows[o-1].cells[c-1].id){if(1!=e.rows[o-1].cells[c-1].id.charAt(3)||0!=e.rows[o-1].cells[c-1].id.charAt(2)){if(r.push([o-1,c-1]),t.push([o-1,c-1]),0==e.rows[o-1].cells[c-1].id.charAt(2)){var p=e.rows[o-1].cells[c-1].id;for(--o,--c;o>0&&c>0;){if(e.rows[o-1].cells[c-1].id){if(1==e.rows[o-1].cells[c-1].id.charAt(3)&&0==e.rows[o-1].cells[c-1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o-1,c-1]),--o,--c}}break}r.push([o-1,c-1]);var h=l+""+i+1+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o-1,c-1]),t.push([o-1,c-1]);--o,--c}var o=parseInt(pos_piezas_blancas[key][0]),c=parseInt(pos_piezas_blancas[key][1]),t=[];for(t.push([o,c]);o>0&&7>c;){if(e.rows[o-1].cells[c+1].id){if(1!=e.rows[o-1].cells[c+1].id.charAt(3)||0!=e.rows[o-1].cells[c+1].id.charAt(2)){if(r.push([o-1,c+1]),t.push([o-1,c+1]),0==e.rows[o-1].cells[c+1].id.charAt(2)){var p=e.rows[o-1].cells[c+1].id;for(--o,++c;o>0&&7>c;){if(e.rows[o-1].cells[c+1].id){if(1==e.rows[o-1].cells[c+1].id.charAt(3)&&0==e.rows[o-1].cells[c+1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o-1,c+1]),--o,++c}}break}r.push([o-1,c+1]);var h=l+""+i+1+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o-1,c+1]),t.push([o-1,c+1]);--o,++c}var o=parseInt(pos_piezas_blancas[key][0]),c=parseInt(pos_piezas_blancas[key][1]),t=[];for(t.push([o,c]);7>o&&c>0;){if(e.rows[o+1].cells[c-1].id){if(1!=e.rows[o+1].cells[c-1].id.charAt(3)||0!=e.rows[o+1].cells[c-1].id.charAt(2)){if(r.push([o+1,c-1]),t.push([o+1,c-1]),0==e.rows[o+1].cells[c-1].id.charAt(2)){var p=e.rows[o+1].cells[c-1].id;for(++o,--c;7>o&&c>0;){if(e.rows[o+1].cells[c-1].id){if(1==e.rows[o+1].cells[c-1].id.charAt(3)&&0==e.rows[o+1].cells[c-1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o+1,c-1]),++o,--c}}break}r.push([o+1,c-1]);var h=l+""+i+1+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o+1,c-1]),t.push([o+1,c-1]);++o,--c}var o=parseInt(pos_piezas_blancas[key][0]),c=parseInt(pos_piezas_blancas[key][1]),t=[];for(t.push([o,c]);7>o&&7>c;){if(e.rows[o+1].cells[c+1].id){if(1!=e.rows[o+1].cells[c+1].id.charAt(3)||0!=e.rows[o+1].cells[c+1].id.charAt(2)){if(r.push([o+1,c+1]),t.push([o+1,c+1]),0==e.rows[o+1].cells[c+1].id.charAt(2)){var p=e.rows[o+1].cells[c+1].id;for(++o,++c;7>o&&7>c;){if(e.rows[o+1].cells[c+1].id){if(1==e.rows[o+1].cells[c+1].id.charAt(3)&&0==e.rows[o+1].cells[c+1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o+1,c+1]),++o,++c}}break}r.push([o+1,c+1]);var h=l+""+i+1+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o+1,c+1]),t.push([o+1,c+1]);++o,++c}mov_ataque_blancas[key]=r.slice()}if(5==key||8==key||5==a){mov_ataque_blancas[key]=[];var r=[],l=parseInt(pos_piezas_blancas[key][0]),i=parseInt(pos_piezas_blancas[key][1]),o=parseInt(pos_piezas_blancas[key][0]),c=parseInt(pos_piezas_blancas[key][1]),t=[];for(t.push([o,c]);o>0;){if(e.rows[o-1].cells[c].id){if(1!=e.rows[o-1].cells[c].id.charAt(3)||0!=e.rows[o-1].cells[c].id.charAt(2)){if(r.push([o-1,c]),t.push([o-1,c]),0==e.rows[o-1].cells[c].id.charAt(2)){var p=e.rows[o-1].cells[c].id;for(--o;o>0;){if(e.rows[o-1].cells[c].id){if(1==e.rows[o-1].cells[c].id.charAt(3)&&0==e.rows[o-1].cells[c].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o-1,c]),--o}}break}r.push([o-1,c]);var h=l+""+i+1+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o-1,c]),t.push([o-1,c]);--o}var o=parseInt(pos_piezas_blancas[key][0]),c=parseInt(pos_piezas_blancas[key][1]),t=[];for(t.push([o,c]);7>o;){if(e.rows[o+1].cells[c].id){if(1!=e.rows[o+1].cells[c].id.charAt(3)||0!=e.rows[o+1].cells[c].id.charAt(2)){if(r.push([o+1,c]),t.push([o+1,c]),0==e.rows[o+1].cells[c].id.charAt(2)){var p=e.rows[o+1].cells[c].id;for(++o;7>o;){if(e.rows[o+1].cells[c].id){if(1==e.rows[o+1].cells[c].id.charAt(3)&&0==e.rows[o+1].cells[c].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o+1,c]),++o}}break}r.push([o+1,c]);var h=l+""+i+1+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o+1,c]),t.push([o+1,c]);++o}var o=parseInt(pos_piezas_blancas[key][0]),c=parseInt(pos_piezas_blancas[key][1]),t=[];for(t.push([o,c]);c>0;){if(e.rows[o].cells[c-1].id){if(1!=e.rows[o].cells[c-1].id.charAt(3)||0!=e.rows[o].cells[c-1].id.charAt(2)){if(r.push([o,c-1]),t.push([o,c-1]),0==e.rows[o].cells[c-1].id.charAt(2)){var p=e.rows[o].cells[c-1].id;for(--c;c>0;){if(e.rows[o].cells[c-1].id){if(1==e.rows[o].cells[c-1].id.charAt(3)&&0==e.rows[o].cells[c-1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o,c-1]),--c}}break}r.push([o,c-1]);var h=l+""+i+1+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o,c-1]),t.push([o,c-1]);--c}var o=parseInt(pos_piezas_blancas[key][0]),c=parseInt(pos_piezas_blancas[key][1]),t=[];for(t.push([o,c]);7>c;){if(e.rows[o].cells[c+1].id){if(1!=e.rows[o].cells[c+1].id.charAt(3)||0!=e.rows[o].cells[c+1].id.charAt(2)){if(r.push([o,c+1]),t.push([o,c+1]),0==e.rows[o].cells[c+1].id.charAt(2)){var p=e.rows[o].cells[c+1].id;for(++c;7>c;){if(e.rows[o].cells[c+1].id){if(1==e.rows[o].cells[c+1].id.charAt(3)&&0==e.rows[o].cells[c+1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o,c+1]),++c}}break}r.push([o,c+1]);var h=l+""+i+1+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o,c+1]),t.push([o,c+1]);++c}mov_ataque_blancas[key]=r.slice()}}for(key in pos_piezas_negras){if(a=2==key.length?key[1]:key,2==key||2==a){mov_ataque_negras[key]=[];var r=[],l=parseInt(pos_piezas_negras[key][0]),i=parseInt(pos_piezas_negras[key][1]),o=parseInt(pos_piezas_negras[key][0]),c=parseInt(pos_piezas_negras[key][1]),t=[];for(t.push([o,c]);o>0;){if(e.rows[o-1].cells[c].id){if(1!=e.rows[o-1].cells[c].id.charAt(3)||1!=e.rows[o-1].cells[c].id.charAt(2)){if(r.push([o-1,c]),t.push([o-1,c]),1==e.rows[o-1].cells[c].id.charAt(2)){var p=e.rows[o-1].cells[c].id;for(--o;o>0;){if(e.rows[o-1].cells[c].id){if(1==e.rows[o-1].cells[c].id.charAt(3)&&1==e.rows[o-1].cells[c].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o-1,c]),--o}}break}r.push([o-1,c]);var h=l+""+i+0+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o-1,c]),t.push([o-1,c]);--o}var o=parseInt(pos_piezas_negras[key][0]),c=parseInt(pos_piezas_negras[key][1]),t=[];for(t.push([o,c]);7>o;){if(e.rows[o+1].cells[c].id){if(1!=e.rows[o+1].cells[c].id.charAt(3)||1!=e.rows[o+1].cells[c].id.charAt(2)){if(r.push([o+1,c]),t.push([o+1,c]),1==e.rows[o+1].cells[c].id.charAt(2)){var p=e.rows[o+1].cells[c].id;for(++o;7>o;){if(e.rows[o+1].cells[c].id){if(1==e.rows[o+1].cells[c].id.charAt(3)&&1==e.rows[o+1].cells[c].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o+1,c]),++o}}break}r.push([o+1,c]);var h=l+""+i+0+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o+1,c]),t.push([o+1,c]);++o}var o=parseInt(pos_piezas_negras[key][0]),c=parseInt(pos_piezas_negras[key][1]),t=[];for(t.push([o,c]);c>0;){if(e.rows[o].cells[c-1].id){if(1!=e.rows[o].cells[c-1].id.charAt(3)||1!=e.rows[o].cells[c-1].id.charAt(2)){if(r.push([o,c-1]),t.push([o,c-1]),1==e.rows[o].cells[c-1].id.charAt(2)){var p=e.rows[o].cells[c-1].id;for(--c;c>0;){if(e.rows[o].cells[c-1].id){if(1==e.rows[o].cells[c-1].id.charAt(3)&&1==e.rows[o].cells[c-1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o,c-1]),--c}}break}r.push([o,c-1]);var h=l+""+i+0+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o,c-1]),t.push([o,c-1]);--c}var o=parseInt(pos_piezas_negras[key][0]),c=parseInt(pos_piezas_negras[key][1]),t=[];for(t.push([o,c]);7>c;){if(e.rows[o].cells[c+1].id){if(1!=e.rows[o].cells[c+1].id.charAt(3)||1!=e.rows[o].cells[c+1].id.charAt(2)){if(r.push([o,c+1]),t.push([o,c+1]),1==e.rows[o].cells[c+1].id.charAt(2)){var p=e.rows[o].cells[c+1].id;for(++c;7>c;){if(e.rows[o].cells[c+1].id){if(1==e.rows[o].cells[c+1].id.charAt(3)&&1==e.rows[o].cells[c+1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o,c+1]),++c}}break}r.push([o,c+1]);var h=l+""+i+0+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o,c+1]),t.push([o,c+1]);++c}var o=parseInt(pos_piezas_negras[key][0]),c=parseInt(pos_piezas_negras[key][1]),t=[];for(t.push([o,c]);o>0&&c>0;){if(e.rows[o-1].cells[c-1].id){if(1!=e.rows[o-1].cells[c-1].id.charAt(3)||1!=e.rows[o-1].cells[c-1].id.charAt(2)){if(r.push([o-1,c-1]),t.push([o-1,c-1]),1==e.rows[o-1].cells[c-1].id.charAt(2)){var p=e.rows[o-1].cells[c-1].id;for(--o,--c;o>0&&c>0;){if(e.rows[o-1].cells[c-1].id){if(1==e.rows[o-1].cells[c-1].id.charAt(3)&&1==e.rows[o-1].cells[c-1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o-1,c-1]),--o,--c}}break}r.push([o-1,c-1]);var h=l+""+i+0+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o-1,c-1]),t.push([o-1,c-1]);--o,--c}var o=parseInt(pos_piezas_negras[key][0]),c=parseInt(pos_piezas_negras[key][1]),t=[];for(t.push([o,c]);o>0&&7>c;){if(e.rows[o-1].cells[c+1].id){if(1!=e.rows[o-1].cells[c+1].id.charAt(3)||1!=e.rows[o-1].cells[c+1].id.charAt(2)){if(r.push([o-1,c+1]),t.push([o-1,c+1]),1==e.rows[o-1].cells[c+1].id.charAt(2)){var p=e.rows[o-1].cells[c+1].id;for(--o,++c;o>0&&7>c;){if(e.rows[o-1].cells[c+1].id){if(1==e.rows[o-1].cells[c+1].id.charAt(3)&&1==e.rows[o-1].cells[c+1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o-1,c+1]),--o,++c}}break}r.push([o-1,c+1]);var h=l+""+i+0+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o-1,c+1]),t.push([o-1,c+1]);--o,++c}var o=parseInt(pos_piezas_negras[key][0]),c=parseInt(pos_piezas_negras[key][1]),t=[];for(t.push([o,c]);7>o&&c>0;){if(e.rows[o+1].cells[c-1].id){if(1!=e.rows[o+1].cells[c-1].id.charAt(3)||1!=e.rows[o+1].cells[c-1].id.charAt(2)){if(r.push([o+1,c-1]),t.push([o+1,c-1]),1==e.rows[o+1].cells[c-1].id.charAt(2)){var p=e.rows[o+1].cells[c-1].id;for(++o,--c;7>o&&c>0;){if(e.rows[o+1].cells[c-1].id){if(1==e.rows[o+1].cells[c-1].id.charAt(3)&&1==e.rows[o+1].cells[c-1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o+1,c-1]),++o,--c}}break}r.push([o+1,c-1]);var h=l+""+i+0+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o+1,c-1]),t.push([o+1,c-1]);++o,--c}var o=parseInt(pos_piezas_negras[key][0]),c=parseInt(pos_piezas_negras[key][1]),t=[];for(t.push([o,c]);7>o&&7>c;){if(e.rows[o+1].cells[c+1].id){if(1!=e.rows[o+1].cells[c+1].id.charAt(3)||1!=e.rows[o+1].cells[c+1].id.charAt(2)){if(r.push([o+1,c+1]),t.push([o+1,c+1]),1==e.rows[o+1].cells[c+1].id.charAt(2)){var p=e.rows[o+1].cells[c+1].id;for(++o,++c;7>o&&7>c;){if(e.rows[o+1].cells[c+1].id){if(1==e.rows[o+1].cells[c+1].id.charAt(3)&&1==e.rows[o+1].cells[c+1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o+1,c+1]),++o,++c}}break}r.push([o+1,c+1]);var h=l+""+i+0+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o+1,c+1]),t.push([o+1,c+1]);++o,++c}mov_ataque_negras[key]=r.slice()}if(3==key||6==key||3==a){mov_ataque_negras[key]=[];var r=[],l=parseInt(pos_piezas_negras[key][0]),i=parseInt(pos_piezas_negras[key][1]),o=parseInt(pos_piezas_negras[key][0]),c=parseInt(pos_piezas_negras[key][1]),t=[];for(t.push([o,c]);o>0&&c>0;){if(e.rows[o-1].cells[c-1].id){if(1!=e.rows[o-1].cells[c-1].id.charAt(3)||1!=e.rows[o-1].cells[c-1].id.charAt(2)){if(r.push([o-1,c-1]),t.push([o-1,c-1]),1==e.rows[o-1].cells[c-1].id.charAt(2)){var p=e.rows[o-1].cells[c-1].id;for(--o,--c;o>0&&c>0;){if(e.rows[o-1].cells[c-1].id){if(1==e.rows[o-1].cells[c-1].id.charAt(3)&&1==e.rows[o-1].cells[c-1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o-1,c-1]),--o,--c}}break}r.push([o-1,c-1]);var h=l+""+i+0+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o-1,c-1]),t.push([o-1,c-1]);--o,--c}var o=parseInt(pos_piezas_negras[key][0]),c=parseInt(pos_piezas_negras[key][1]),t=[];for(t.push([o,c]);o>0&&7>c;){if(e.rows[o-1].cells[c+1].id){if(1!=e.rows[o-1].cells[c+1].id.charAt(3)||1!=e.rows[o-1].cells[c+1].id.charAt(2)){if(r.push([o-1,c+1]),t.push([o-1,c+1]),1==e.rows[o-1].cells[c+1].id.charAt(2)){var p=e.rows[o-1].cells[c+1].id;for(--o,++c;o>0&&7>c;){if(e.rows[o-1].cells[c+1].id){if(1==e.rows[o-1].cells[c+1].id.charAt(3)&&1==e.rows[o-1].cells[c+1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o-1,c+1]),--o,++c}}break}r.push([o-1,c+1]);var h=l+""+i+0+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o-1,c+1]),t.push([o-1,c+1]);--o,++c}var o=parseInt(pos_piezas_negras[key][0]),c=parseInt(pos_piezas_negras[key][1]),t=[];for(t.push([o,c]);7>o&&c>0;){if(e.rows[o+1].cells[c-1].id){if(1!=e.rows[o+1].cells[c-1].id.charAt(3)||1!=e.rows[o+1].cells[c-1].id.charAt(2)){if(r.push([o+1,c-1]),t.push([o+1,c-1]),1==e.rows[o+1].cells[c-1].id.charAt(2)){var p=e.rows[o+1].cells[c-1].id;for(++o,--c;7>o&&c>0;){if(e.rows[o+1].cells[c-1].id){if(1==e.rows[o+1].cells[c-1].id.charAt(3)&&1==e.rows[o+1].cells[c-1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o+1,c-1]),++o,--c}}break}r.push([o+1,c-1]);var h=l+""+i+0+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o+1,c-1]),t.push([o+1,c-1]);++o,--c}var o=parseInt(pos_piezas_negras[key][0]),c=parseInt(pos_piezas_negras[key][1]),t=[];for(t.push([o,c]);7>o&&7>c;){if(e.rows[o+1].cells[c+1].id){if(1!=e.rows[o+1].cells[c+1].id.charAt(3)||1!=e.rows[o+1].cells[c+1].id.charAt(2)){if(r.push([o+1,c+1]),t.push([o+1,c+1]),1==e.rows[o+1].cells[c+1].id.charAt(2)){var p=e.rows[o+1].cells[c+1].id;for(++o,++c;7>o&&7>c;){if(e.rows[o+1].cells[c+1].id){if(1==e.rows[o+1].cells[c+1].id.charAt(3)&&1==e.rows[o+1].cells[c+1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o+1,c+1]),++o,++c}}break}r.push([o+1,c+1]);var h=l+""+i+0+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o+1,c+1]),t.push([o+1,c+1]);++o,++c}mov_ataque_negras[key]=r.slice()}if(5==key||8==key||5==a){mov_ataque_negras[key]=[];var r=[],l=parseInt(pos_piezas_negras[key][0]),i=parseInt(pos_piezas_negras[key][1]),o=parseInt(pos_piezas_negras[key][0]),c=parseInt(pos_piezas_negras[key][1]),t=[];for(t.push([o,c]);o>0;){if(e.rows[o-1].cells[c].id){if(1!=e.rows[o-1].cells[c].id.charAt(3)||1!=e.rows[o-1].cells[c].id.charAt(2)){if(r.push([o-1,c]),t.push([o-1,c]),1==e.rows[o-1].cells[c].id.charAt(2)){var p=e.rows[o-1].cells[c].id;for(--o;o>0;){if(e.rows[o-1].cells[c].id){if(1==e.rows[o-1].cells[c].id.charAt(3)&&1==e.rows[o-1].cells[c].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o-1,c]),--o}}break}r.push([o-1,c]);var h=l+""+i+0+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o-1,c]),t.push([o-1,c]);--o}var o=parseInt(pos_piezas_negras[key][0]),c=parseInt(pos_piezas_negras[key][1]),t=[];for(t.push([o,c]);7>o;){if(e.rows[o+1].cells[c].id){if(1!=e.rows[o+1].cells[c].id.charAt(3)||1!=e.rows[o+1].cells[c].id.charAt(2)){if(r.push([o+1,c]),t.push([o+1,c]),1==e.rows[o+1].cells[c].id.charAt(2)){var p=e.rows[o+1].cells[c].id;for(++o;7>o;){if(e.rows[o+1].cells[c].id){if(1==e.rows[o+1].cells[c].id.charAt(3)&&1==e.rows[o+1].cells[c].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o+1,c]),++o}}break}r.push([o+1,c]);var h=l+""+i+0+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o+1,c]),t.push([o+1,c]);++o}var o=parseInt(pos_piezas_negras[key][0]),c=parseInt(pos_piezas_negras[key][1]),t=[];for(t.push([o,c]);c>0;){if(e.rows[o].cells[c-1].id){if(1!=e.rows[o].cells[c-1].id.charAt(3)||1!=e.rows[o].cells[c-1].id.charAt(2)){if(r.push([o,c-1]),t.push([o,c-1]),1==e.rows[o].cells[c-1].id.charAt(2)){var p=e.rows[o].cells[c-1].id;for(--c;c>0;){if(e.rows[o].cells[c-1].id){if(1==e.rows[o].cells[c-1].id.charAt(3)&&1==e.rows[o].cells[c-1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o,c-1]),--c}}break}r.push([o,c-1]);var h=l+""+i+0+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o,c-1]),t.push([o,c-1]);--c}var o=parseInt(pos_piezas_negras[key][0]),c=parseInt(pos_piezas_negras[key][1]),t=[];for(t.push([o,c]);7>c;){if(e.rows[o].cells[c+1].id){if(1!=e.rows[o].cells[c+1].id.charAt(3)||1!=e.rows[o].cells[c+1].id.charAt(2)){if(r.push([o,c+1]),t.push([o,c+1]),1==e.rows[o].cells[c+1].id.charAt(2)){var p=e.rows[o].cells[c+1].id;for(++c;7>c;){if(e.rows[o].cells[c+1].id){if(1==e.rows[o].cells[c+1].id.charAt(3)&&1==e.rows[o].cells[c+1].id.charAt(2)){piezas_inmoviles[p]=t.slice();break}break}t.push([o,c+1]),++c}}break}r.push([o,c+1]);var h=l+""+i+0+key;jaque=!0,jaque_pos[h]=t.slice()}else r.push([o,c+1]),t.push([o,c+1]);++c}mov_ataque_negras[key]=r.slice()}}jaque&&(1==turno?e.rows[pos_piezas_negras[1][0]].cells[pos_piezas_negras[1][1]].className="jaque":0==turno&&(e.rows[pos_piezas_blancas[1][0]].cells[pos_piezas_blancas[1][1]].className="jaque"),jaque_mov_piezas_(s))}function jaque_mov_piezas_(s){var e=parseInt(s[2]),a=document.getElementById("chess_table"),r=[];if(jaque_mov_rey=[],jaque_mov_piezas={},1==e){var l=pos_piezas_negras[1][0],i=pos_piezas_negras[1][1];if(l-1>-1&&i-1>-1&&(a.rows[l-1].cells[i-1].id&&1!=a.rows[l-1].cells[i-1].id.charAt(2)||r.push([l-1,i-1])),l-1>-1&&(a.rows[l-1].cells[i].id&&1!=a.rows[l-1].cells[i].id.charAt(2)||r.push([l-1,i])),l-1>-1&&8>i+1&&(a.rows[l-1].cells[i+1].id&&1!=a.rows[l-1].cells[i+1].id.charAt(2)||r.push([l-1,i+1])),i-1>-1&&(a.rows[l].cells[i-1].id&&1!=a.rows[l].cells[i-1].id.charAt(2)||r.push([l,i-1])),8>l+1&&i-1>-1&&(a.rows[l+1].cells[i-1].id&&1!=a.rows[l+1].cells[i-1].id.charAt(2)||r.push([l+1,i-1])),8>l+1&&(a.rows[l+1].cells[i].id&&1!=a.rows[l+1].cells[i].id.charAt(2)||r.push([l+1,i])),8>l+1&&8>i+1&&(a.rows[l+1].cells[i+1].id&&1!=a.rows[l+1].cells[i+1].id.charAt(2)||r.push([l+1,i+1])),8>i+1&&(a.rows[l].cells[i+1].id&&1!=a.rows[l].cells[i+1].id.charAt(2)||r.push([l,i+1])),r.length>0){var o=[];for(key in mov_ataque_blancas)for(var c=0;c<mov_ataque_blancas[key].length;c++)for(var t=0;t<r.length;t++)mov_ataque_blancas[key][c].join("")==r[t].join("")&&o.push(r[t]);if(o.length>0)for(var c=0;c<o.length;c++)for(t=0;t<r.length;t++)o[c].join("")==r[t].join("")&&r.splice(t,1);jaque_mov_rey=r.slice()}var p=[];for(key in jaque_pos)p.push(key);if(1==p.length){var h=parseInt(p[0][0]),n=parseInt(p[0][1]),u=[];for(key in jaque_pos)for(var c=0;c<jaque_pos[key].length;c++)u.push(jaque_pos[key][c]);var _=[];for(key in mov_ataque_negras)if(1!=key&&(2==key.length||!isNaN(key))){for(var c=0;c<mov_ataque_negras[key].length;c++)for(var t=0;t<u.length;t++)mov_ataque_negras[key][c].join("")==u[t].join("")&&_.push(u[t]);_.length>0&&(jaque_mov_piezas[key]=_.slice()),_=[]}var d=[];for(key in pos_piezas_negras)if(isNaN(key)&&1==key.length){var l=parseInt(pos_piezas_negras[key][0]),i=parseInt(pos_piezas_negras[key][1]);1==l?(a.rows[l+1].cells[i].id||d.push([l+1,i]),a.rows[l+1].cells[i].id||a.rows[l+2].cells[i].id||d.push([l+2,i])):a.rows[l+1].cells[i].id||d.push([l+1,i]),i-1>=0&&a.rows[l+1].cells[i-1].id&&a.rows[l+1].cells[i-1].id.charAt(0)==h&&a.rows[l+1].cells[i-1].id.charAt(1)==n&&d.push([l+1,i-1]),8>i+1&&a.rows[l+1].cells[i+1].id&&a.rows[l+1].cells[i+1].id.charAt(0)==h&&a.rows[l+1].cells[i+1].id.charAt(1)==n&&d.push([l+1,i+1]);for(var c=0;c<u.length;c++)for(var t=0;t<d.length;t++)u[c].join("")==d[t].join("")&&_.push(u[c]);_.length>0&&(jaque_mov_piezas[key]=_.slice()),_=[],d=[],isNaN(p[0].charAt(3))&&1==ultimo_mov[4]&&(l==h&&i==n+1||l==h&&i==n-1)&&(jaque_mov_piezas[key]=[[h+1,n]])}}if(0==jaque_mov_rey.length){var w=Object.getOwnPropertyNames(jaque_mov_piezas);0==w.length&&(alert("jaque mate"),mate=!0)}}else if(0==e){var l=pos_piezas_blancas[1][0],i=pos_piezas_blancas[1][1];if(l-1>-1&&i-1>-1&&(a.rows[l-1].cells[i-1].id&&0!=a.rows[l-1].cells[i-1].id.charAt(2)||r.push([l-1,i-1])),l-1>-1&&(a.rows[l-1].cells[i].id&&0!=a.rows[l-1].cells[i].id.charAt(2)||r.push([l-1,i])),l-1>-1&&8>i+1&&(a.rows[l-1].cells[i+1].id&&0!=a.rows[l-1].cells[i+1].id.charAt(2)||r.push([l-1,i+1])),i-1>-1&&(a.rows[l].cells[i-1].id&&0!=a.rows[l].cells[i-1].id.charAt(2)||r.push([l,i-1])),8>l+1&&i-1>-1&&(a.rows[l+1].cells[i-1].id&&0!=a.rows[l+1].cells[i-1].id.charAt(2)||r.push([l+1,i-1])),8>l+1&&(a.rows[l+1].cells[i].id&&0!=a.rows[l+1].cells[i].id.charAt(2)||r.push([l+1,i])),8>l+1&&8>i+1&&(a.rows[l+1].cells[i+1].id&&0!=a.rows[l+1].cells[i+1].id.charAt(2)||r.push([l+1,i+1])),
8>i+1&&(a.rows[l].cells[i+1].id&&0!=a.rows[l].cells[i+1].id.charAt(2)||r.push([l,i+1])),r.length>0){var o=[];for(key in mov_ataque_blancas)for(var c=0;c<mov_ataque_blancas[key].length;c++)for(var t=0;t<r.length;t++)mov_ataque_blancas[key][c].join("")==r[t].join("")&&o.push(r[t]);if(o.length>0)for(var c=0;c<o.length;c++)for(t=0;t<r.length;t++)o[c].join("")==r[t].join("")&&r.splice(t,1);jaque_mov_rey=r.slice()}var p=[];for(key in jaque_pos)p.push(key);if(1==p.length){var h=p[0][0],n=p[0][1],u=[];for(key in jaque_pos)for(var c=0;c<jaque_pos[key].length;c++)u.push(jaque_pos[key][c]);var _=[];for(key in mov_ataque_blancas)if((2==key.length||!isNaN(key))&&1!=key){for(var c=0;c<mov_ataque_blancas[key].length;c++)for(var t=0;t<u.length;t++)mov_ataque_blancas[key][c].join("")==u[t].join("")&&_.push(u[t]);_.length>0&&(jaque_mov_piezas[key]=_.slice()),_=[]}var d=[];for(key in pos_piezas_blancas)if(isNaN(key)&&1==key.length){var l=pos_piezas_blancas[key][0],i=pos_piezas_blancas[key][1];6==l?(a.rows[l-1].cells[i].id||d.push([l-1,i]),a.rows[l-1].cells[i].id||a.rows[l-2].cells[i].id||d.push([l-2,i])):a.rows[l-1].cells[i].id||d.push([l-1,i]),i-1>=0&&a.rows[l-1].cells[i-1].id&&a.rows[l-1].cells[i-1].id.charAt(0)==h&&a.rows[l-1].cells[i-1].id.charAt(1)==n&&d.push([l-1,i-1]),8>i+1&&a.rows[l-1].cells[i+1].id&&a.rows[l-1].cells[i+1].id.charAt(0)==h&&a.rows[l-1].cells[i+1].id.charAt(1)==n&&d.push([l-1,i+1]);for(var c=0;c<u.length;c++)for(var t=0;t<d.length;t++)u[c].join("")==d[t].join("")&&_.push(u[c]);_.length>0&&(jaque_mov_piezas[key]=_.slice()),_=[],d=[],isNaN(p[0].charAt(3))&&1==ultimo_mov[4]&&(l==h&&i==n+1||l==h&&i==n-1)&&(jaque_mov_piezas[key]=[[h-1,n]])}}if(0==jaque_mov_rey.length){var w=Object.getOwnPropertyNames(jaque_mov_piezas);0==w.length&&(alert("jaque mate"),mate=!0)}}}function mov_jaque(s){var e=s.id,a=document.getElementById("chess_table");if(1==e[3]){if(jaque_mov_rey.length>0)for(var r=0;r<jaque_mov_rey.length;r++)a.rows[jaque_mov_rey[r][0]].cells[jaque_mov_rey[r][1]].className="lighter";return 0==enviar_mov&&segundo_click_otro_jugador(),!1}if(1==ultimo_mov[4]){for(key in jaque_mov_piezas)e[3]==key&&(a.rows[jaque_mov_piezas[key][0][0]].cells[jaque_mov_piezas[key][0][1]].className="lighter_pp");return 0==enviar_mov&&segundo_click_otro_jugador(),!1}if(4==e.length)var l=e[3];else var l=e[3]+e[4];for(key in jaque_mov_piezas)if(l==key)for(var r=0;r<jaque_mov_piezas[key].length;r++)a.rows[jaque_mov_piezas[key][r][0]].cells[jaque_mov_piezas[key][r][1]].className="lighter";0==enviar_mov&&segundo_click_otro_jugador()}function verificar_tablas(){var s=document.getElementById("chess_table");if(0==turno){var e={};for(key in mov_ataque_blancas)e[key]=mov_ataque_blancas[key].slice();var a=[],r=pos_piezas_blancas[1][0],l=pos_piezas_blancas[1][1];if(r-1>-1&&l-1>-1&&(s.rows[r-1].cells[l-1].id&&0!=s.rows[r-1].cells[l-1].id.charAt(2)||a.push([r-1,l-1])),r-1>-1&&(s.rows[r-1].cells[l].id&&0!=s.rows[r-1].cells[l].id.charAt(2)||a.push([r-1,l])),r-1>-1&&8>l+1&&(s.rows[r-1].cells[l+1].id&&0!=s.rows[r-1].cells[l+1].id.charAt(2)||a.push([r-1,l+1])),l-1>-1&&(s.rows[r].cells[l-1].id&&0!=s.rows[r].cells[l-1].id.charAt(2)||a.push([r,l-1])),8>r+1&&l-1>-1&&(s.rows[r+1].cells[l-1].id&&0!=s.rows[r+1].cells[l-1].id.charAt(2)||a.push([r+1,l-1])),8>r+1&&(s.rows[r+1].cells[l].id&&0!=s.rows[r+1].cells[l].id.charAt(2)||a.push([r+1,l])),8>r+1&&8>l+1&&(s.rows[r+1].cells[l+1].id&&0!=s.rows[r+1].cells[l+1].id.charAt(2)||a.push([r+1,l+1])),8>l+1&&(s.rows[r].cells[l+1].id&&0!=s.rows[r].cells[l+1].id.charAt(2)||a.push([r,l+1])),a.length>0){var i=[];for(key in mov_ataque_negras)for(var o=0;o<mov_ataque_negras[key].length;o++)for(var c=0;c<a.length;c++)mov_ataque_negras[key][o].join("")==a[c].join("")&&i.push(a[c]);if(!(i.length>0))return!1;for(var o=0;o<i.length;o++)for(c=0;c<a.length;c++)i[o].join("")==a[c].join("")&&a.splice(c,1);if(a.length>0)return!1}delete e[1];var t=Object.getOwnPropertyNames(piezas_inmoviles);if(t.length>0)for(key in piezas_inmoviles)if(isNaN(key[3])&&4==key.length){for(var p=[],h=key[3],o=0;o<piezas_inmoviles[key].length;o++)p.push(piezas_inmoviles[key][o]);for(var o=0;o<e[h].length;o++)if(e[h][o].join("")==p[0].join(""))return!1;var r=parseInt(key[0]),l=parseInt(key[1]);if(!s.rows[r-1].cells[l].id)for(var n=r-1+""+l,c=0;c<p.length;c++)if(n==p[c].join(""))return!1;delete e[h]}else if(4==key.length&&4==key[3]||4==key.length&&7==key[3]||5==key.length&&4==key[4]){if(4==key.length)var h=key[3];else var h=key[3]+key[4];delete e[h]}else{var p=[];if(4==key.length)var h=key[3];else var h=key[3]+key[4];for(var o=0;o<piezas_inmoviles[key].length;o++)p.push(piezas_inmoviles[key][o]);for(var o=0;o<e[h].length;o++)for(var c=0;c<p.length;c++)if(e[h][o].join("")==p[c].join(""))return!1;delete e[h]}var t=Object.getOwnPropertyNames(e);if(t.length>1){for(key in e)if(1==key.length&&isNaN(key)){var r=pos_piezas_blancas[key][0],l=pos_piezas_blancas[key][1];if(!s.rows[r-1].cells[l].id)return!1;if(l-1>=0&&s.rows[r-1].cells[l-1].id&&0==s.rows[r-1].cells[l-1].id.charAt(2))return!1;if(8>l+1&&s.rows[r-1].cells[l+1].id&&0==s.rows[r-1].cells[l+1].id.charAt(2))return!1;delete e[key]}for(key in e)if(e[key].length>0)return!1}mate=!0,turno=3,alert("tablas")}else if(1==turno){var e={};for(key in mov_ataque_negras)e[key]=mov_ataque_negras[key].slice();var a=[],r=pos_piezas_negras[1][0],l=pos_piezas_negras[1][1];if(r-1>-1&&l-1>-1&&(s.rows[r-1].cells[l-1].id&&1!=s.rows[r-1].cells[l-1].id.charAt(2)||a.push([r-1,l-1])),r-1>-1&&(s.rows[r-1].cells[l].id&&1!=s.rows[r-1].cells[l].id.charAt(2)||a.push([r-1,l])),r-1>-1&&8>l+1&&(s.rows[r-1].cells[l+1].id&&1!=s.rows[r-1].cells[l+1].id.charAt(2)||a.push([r-1,l+1])),l-1>-1&&(s.rows[r].cells[l-1].id&&1!=s.rows[r].cells[l-1].id.charAt(2)||a.push([r,l-1])),8>r+1&&l-1>-1&&(s.rows[r+1].cells[l-1].id&&1!=s.rows[r+1].cells[l-1].id.charAt(2)||a.push([r+1,l-1])),8>r+1&&(s.rows[r+1].cells[l].id&&1!=s.rows[r+1].cells[l].id.charAt(2)||a.push([r+1,l])),8>r+1&&8>l+1&&(s.rows[r+1].cells[l+1].id&&1!=s.rows[r+1].cells[l+1].id.charAt(2)||a.push([r+1,l+1])),8>l+1&&(s.rows[r].cells[l+1].id&&1!=s.rows[r].cells[l+1].id.charAt(2)||a.push([r,l+1])),a.length>0){var i=[];for(key in mov_ataque_blancas)for(var o=0;o<mov_ataque_blancas[key].length;o++)for(var c=0;c<a.length;c++)mov_ataque_blancas[key][o].join("")==a[c].join("")&&i.push(a[c]);if(!(i.length>0))return!1;for(var o=0;o<i.length;o++)for(c=0;c<a.length;c++)i[o].join("")==a[c].join("")&&a.splice(c,1);if(a.length>0)return!1}delete e[1];var t=Object.getOwnPropertyNames(piezas_inmoviles);if(t.length>0)for(key in piezas_inmoviles)if(isNaN(key[3])&&4==key.length){for(var p=[],h=key[3],o=0;o<piezas_inmoviles[key].length;o++)p.push(piezas_inmoviles[key][o]);for(var o=0;o<e[h].length;o++)if(e[h][o].join("")==p[0].join(""))return!1;var r=parseInt(key[0]),l=parseInt(key[1]);if(!s.rows[r+1].cells[l].id)for(var n=r+1+""+l,c=0;c<p.length;c++)if(n==p[c].join(""))return!1;delete e[h]}else if(4==key.length&&4==key[3]||4==key.length&&7==key[3]||5==key.length&&4==key[4]){if(4==key.length)var h=key[3];else var h=key[3]+key[4];delete e[h]}else{var p=[];if(4==key.length)var h=key[3];else var h=key[3]+key[4];for(var o=0;o<piezas_inmoviles[key].length;o++)p.push(piezas_inmoviles[key][o]);for(var o=0;o<e[h].length;o++)for(var c=0;c<p.length;c++)if(e[h][o].join("")==p[c].join(""))return!1;delete e[h]}var t=Object.getOwnPropertyNames(e);if(t.length>1){for(key in e)if(1==key.length&&isNaN(key)){var r=pos_piezas_negras[key][0],l=pos_piezas_negras[key][1];if(!s.rows[r+1].cells[l].id)return!1;if(l-1>=0&&s.rows[r+1].cells[l-1].id&&1==s.rows[r+1].cells[l-1].id.charAt(2))return!1;if(8>l+1&&s.rows[r+1].cells[l+1].id&&1==s.rows[r+1].cells[l+1].id.charAt(2))return!1;delete e[key]}for(key in e)if(e[key].length>0)return!1}mate=!0,turno=3,alert("tablas")}}var salida_w=!1,turno=0,coronar_otro=!1,enviar_mov=!0,pieza_cor_otro="",html_pieza_cor_otro="",pos2="";window.addEventListener("message",receiveMessage,!1);var mov_ataque_blancas={a:[[5,1]],b:[[5,0],[5,2]],c:[[5,1],[5,3]],d:[[5,2],[5,4]],e:[[5,3],[5,5]],f:[[5,4],[5,6]],g:[[5,5],[5,7]],h:[[5,6]],4:[[5,0],[5,2],[6,3]],7:[[5,5],[5,7],[6,4]],1:[[6,2],[6,3],[6,4],[7,2],[7,4]]},mov_ataque_negras={a:[[2,1]],b:[[2,0],[2,2]],c:[[2,1],[2,3]],d:[[2,2],[2,4]],e:[[2,3],[2,5]],f:[[2,4],[2,6]],g:[[2,5],[2,7]],h:[[2,6]],4:[[2,0],[2,2],[1,3]],7:[[2,5],[2,7],[1,4]],1:[[0,2],[0,4],[1,2],[1,3],[1,4]]},pos_piezas_blancas={1:[7,3],2:[7,4],3:[7,2],4:[7,1],5:[7,0],6:[7,5],7:[7,6],8:[7,7],a:[6,0],b:[6,1],c:[6,2],d:[6,3],e:[6,4],f:[6,5],g:[6,6],h:[6,7]},pos_piezas_negras={1:[0,3],2:[0,4],3:[0,2],4:[0,1],5:[0,0],6:[0,5],7:[0,6],8:[0,7],a:[1,0],b:[1,1],c:[1,2],d:[1,3],e:[1,4],f:[1,5],g:[1,6],h:[1,7]};window.addEventListener("load",inicializarEventos_media,!1);var black_rev={a1:"07",a2:"17",a3:"27",a4:"37",a5:"47",a6:"57",a7:"67",a8:"77",b1:"06",b2:"16",b3:"26",b4:"36",b5:"46",b6:"56",b7:"66",b8:"76",c1:"05",c2:"15",c3:"25",c4:"35",c5:"45",c6:"55",c7:"65",c8:"75",d1:"04",d2:"14",d3:"24",d4:"34",d5:"44",d6:"54",d7:"64",d8:"74",e1:"03",e2:"13",e3:"23",e4:"33",e5:"43",e6:"53",e7:"63",e8:"73",f1:"02",f2:"12",f3:"22",f4:"32",f5:"42",f6:"52",f7:"62",f8:"72",g1:"01",g2:"11",g3:"21",g4:"31",g5:"41",g6:"51",g7:"61",g8:"71",h1:"00",h2:"10",h3:"20",h4:"30",h5:"40",h6:"50",h7:"60",h8:"70"},black_coord={"07":"a1","06":"b1","05":"c1","04":"d1","03":"e1","02":"f1","01":"g1","00":"h1",17:"a2",16:"b2",15:"c2",14:"d2",13:"e2",12:"f2",11:"g2",10:"h2",27:"a3",26:"b3",25:"c3",24:"d3",23:"e3",22:"f3",21:"g3",20:"h3",37:"a4",36:"b4",35:"c4",34:"d4",33:"e4",32:"f4",31:"g4",30:"h4",47:"a5",46:"b5",45:"c5",44:"d5",43:"e5",42:"f5",41:"g5",40:"h5",57:"a6",56:"b6",55:"c6",54:"d6",53:"e6",52:"f6",51:"g6",50:"h6",67:"a7",66:"b7",65:"c7",64:"d7",63:"e7",62:"f7",61:"g7",60:"h7",77:"a8",76:"b8",75:"c8",74:"d8",73:"e8",72:"f8",71:"g8",70:"h8"},white_rev={a1:"70",a2:"60",a3:"50",a4:"40",a5:"30",a6:"20",a7:"10",a8:"00",b1:"71",b2:"61",b3:"51",b4:"41",b5:"31",b6:"21",b7:"11",b8:"01",c1:"72",c2:"62",c3:"52",c4:"42",c5:"32",c6:"22",c7:"12",c8:"02",d1:"73",d2:"63",d3:"53",d4:"43",d5:"33",d6:"23",d7:"13",d8:"03",e1:"74",e2:"64",e3:"54",e4:"44",e5:"34",e6:"24",e7:"14",e8:"04",f1:"75",f2:"65",f3:"55",f4:"45",f5:"35",f6:"25",f7:"15",f8:"05",g1:"76",g2:"66",g3:"56",g4:"46",g5:"36",g6:"26",g7:"16",g8:"06",h1:"77",h2:"67",h3:"57",h4:"47",h5:"37",h6:"27",h7:"17",h8:"07"},white_coord={"07":"h8","06":"g8","05":"f8","04":"e8","03":"d8","02":"c8","01":"b8","00":"a8",17:"h7",16:"g7",15:"f7",14:"e7",13:"d7",12:"c7",11:"b7",10:"a7",27:"h6",26:"g6",25:"f6",24:"e6",23:"d6",22:"c6",21:"b6",20:"a6",37:"h5",36:"g5",35:"f5",34:"e5",33:"d5",32:"c5",31:"b5",30:"a5",47:"h4",46:"g4",45:"f4",44:"e4",43:"d4",42:"c4",41:"b4",40:"a4",57:"h3",56:"g3",55:"f3",54:"e3",53:"d3",52:"c3",51:"b3",50:"a3",67:"h2",66:"g2",65:"f2",64:"e2",63:"d2",62:"c2",61:"b2",60:"a2",77:"h1",76:"g1",75:"f1",74:"e1",73:"d1",72:"c1",71:"b1",70:"a1"},num_mov=0,pieza,pieza2,pieza3,pieza_activa=!1,ultimo_mov=[],enroque_blancas=[!1,!1,!1],enroque_negras=[!1,!1,!1],peon_al_paso,piezas_inmoviles={},jaque=!1,mate=!1,jaque_pos={},jaque_mov_rey=[],jaque_mov_piezas={},tablas=!1,pieza_coronar,id_coronar="",mov_yx=["",""];
</script>


</head>
<body>

	<style>
	.rotate{
	-ms-transform: rotate(180deg);
	-webkit-transform: rotate(180deg);
	-moz-transform: rotate(180deg);
	-o-transform: rotate(180deg);
	transform: rotate(180deg);
	}
	
	#chess_table td, #chess_table2 td{
		width:50px; height:50px; text-align:center; font-size:36px;
		text-shadow:1px 1px 1px #999;
		cursor:default;
		user-select:none;
		-moz-user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
		}
	.lighter{
		box-shadow:0px 0px 8px #FF9F71 inset;
		background-color: rgba(255,255,0,0.3);
		}
	.lighter_pp, .lighter_e{
		box-shadow:0px 0px 8px #FF9F71 inset;
		background-color: rgba(206,231,255,0.3);
		}
	.jaque{
		box-shadow:0px 0px 8px red inset;
		background-color: rgba(255,255,202,0.3);
		}
	.peligro{
		box-shadow:0px 0px 8px #89CFF0 inset;
		/*background-color: rgba(206,231,255,0.3);*/
		}
	.casillero_blancas{
		background-color:#ffffff;
		}
	.casillero_negras{
		background-color: rgba(192, 192, 192, 0.5);
		}
	.casillero_seleccionado{
		box-shadow:0px 0px 8px #FF9F71 inset;
		background-color: rgba(255,255,181,0.3);
		}
	
	.coronacion{
		width:50px; height:50px; text-align:center; font-size:36px;
		text-shadow:1px 1px 1px #999;
		cursor:default;
		user-select:none;
		}
	
	</style>
	<div style="display:table-cell">
		<div style="display:table-row">
			<table id="coronacion_blancas" class="coronacion" style="width:100%; visibility:hidden;">
			<tr>
				<td style="font-size:16px;">CORONAR CON: </td><td onClick="coronar(5, this.innerHTML)" onMouseOver="this.style.backgroundColor = '#6ff'" onMouseOut="this.style.backgroundColor = ''">&#9820;</td><td onClick="coronar(4, this.innerHTML)" onMouseOver="this.style.backgroundColor = '#6ff'" onMouseOut="this.style.backgroundColor = ''">&#9822;</td><td onClick="coronar(3, this.innerHTML)" onMouseOver="this.style.backgroundColor = '#6ff'" onMouseOut="this.style.backgroundColor = ''">&#9821;</td><td onClick="coronar(2, this.innerHTML)" onMouseOver="this.style.backgroundColor = '#6ff'" onMouseOut="this.style.backgroundColor = ''">&#9819;</td>
			</tr>
			</table>
		</div>
		<div style="display:table-row">
			<table id="chess_table" style="border:2px solid #9A9A4E; border-spacing:0; border-collapse:collapse;">
			<tbody>
			<tr>
				<td id="0005" class="casillero_blancas">&#9814;</td>
				<td id="0104" class="casillero_negras">&#9816;</td>
				<td id="0203" class="casillero_blancas">&#9815;</td>
				<td id="0301" class="casillero_negras">&#9812;</td>
				<td id="0402" class="casillero_blancas">&#9813;</td>
				<td id="0506" class="casillero_negras">&#9815;</td>
				<td id="0607" class="casillero_blancas">&#9816;</td>
				<td id="0708" class="casillero_negras">&#9814;</td>
			</tr>
			<tr>
				<td id="100a" class="casillero_negras">&#9817;</td>
				<td id="110b" class="casillero_blancas">&#9817;</td>
				<td id="120c" class="casillero_negras">&#9817;</td>
				<td id="130d" class="casillero_blancas">&#9817;</td>
				<td id="140e" class="casillero_negras">&#9817;</td>
				<td id="150f" class="casillero_blancas">&#9817;</td>
				<td id="160g" class="casillero_negras">&#9817;</td>
				<td id="170h" class="casillero_blancas">&#9817;</td>
			</tr>
			<tr>
				<td class="casillero_blancas"></td>
				<td class="casillero_negras"></td>
				<td class="casillero_blancas"></td>
				<td class="casillero_negras"></td>
				<td class="casillero_blancas"></td>
				<td class="casillero_negras"></td>
				<td class="casillero_blancas"></td>
				<td class="casillero_negras"></td>
			</tr>
			<tr>
				<td class="casillero_negras"></td>
				<td class="casillero_blancas"></td>
				<td class="casillero_negras"></td>
				<td class="casillero_blancas"></td>
				<td class="casillero_negras"></td>
				<td class="casillero_blancas"></td>
				<td class="casillero_negras"></td>
				<td class="casillero_blancas"></td>
			</tr>
			<tr>
				<td class="casillero_blancas"></td>
				<td class="casillero_negras"></td>
				<td class="casillero_blancas"></td>
				<td class="casillero_negras"></td>
				<td class="casillero_blancas"></td>
				<td class="casillero_negras"></td>
				<td class="casillero_blancas"></td>
				<td class="casillero_negras"></td>
			</tr>
			<tr>
				<td class="casillero_negras"></td>
				<td class="casillero_blancas"></td>
				<td class="casillero_negras"></td>
				<td class="casillero_blancas"></td>
				<td class="casillero_negras"></td>
				<td class="casillero_blancas"></td>
				<td class="casillero_negras"></td>
				<td class="casillero_blancas"></td>
			</tr>
			<tr>
				<td id="601a" class="casillero_blancas">&#9823;</td>
				<td id="611b" class="casillero_negras">&#9823;</td>
				<td id="621c" class="casillero_blancas">&#9823;</td>
				<td id="631d" class="casillero_negras">&#9823;</td>
				<td id="641e" class="casillero_blancas">&#9823;</td>
				<td id="651f" class="casillero_negras">&#9823;</td>
				<td id="661g" class="casillero_blancas">&#9823;</td>
				<td id="671h" class="casillero_negras">&#9823;</td>
			</tr>
			<tr>
				<td id="7015" class="casillero_negras">&#9820;</td>
				<td id="7114" class="casillero_blancas">&#9822;</td>
				<td id="7213" class="casillero_negras">&#9821;</td>
				<td id="7311" class="casillero_blancas">&#9818;</td>
				<td id="7412" class="casillero_negras">&#9819;</td>
				<td id="7516" class="casillero_blancas">&#9821;</td>
				<td id="7617" class="casillero_negras">&#9822;</td>
				<td id="7718" class="casillero_blancas">&#9820;</td>
			</tr>
			</tbody>
			</table>
		</div>
		<div style="display:table-row">
			<table id="coronacion_negras" class="coronacion" style="width:100%; visibility:hidden;">
			<tr>
				<td style="font-size:16px;">CORONAR CON: </td><td onClick="coronar(5, this.innerHTML)" onMouseOver="this.style.backgroundColor = '#6ff'" onMouseOut="this.style.backgroundColor = ''">&#9814;</td><td onClick="coronar(4, this.innerHTML)" onMouseOver="this.style.backgroundColor = '#6ff'" onMouseOut="this.style.backgroundColor = ''">&#9816;</td><td onClick="coronar(3, this.innerHTML)" onMouseOver="this.style.backgroundColor = '#6ff'" onMouseOut="this.style.backgroundColor = ''">&#9815;</td><td onClick="coronar(2, this.innerHTML)" onMouseOver="this.style.backgroundColor = '#6ff'" onMouseOut="this.style.backgroundColor = ''">&#9813;</td>
			</tr>
			</table>
		</div>
	</div>
</body>
</html>
